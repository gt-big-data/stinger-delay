{"ast":null,"code":"var _jsxFileName = \"/Users/joshuayi/Documents/stinger-delay/Data-Viz/src/features/planTrip/PlanTripPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport styles from \"./PlanTripPage.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PlanTripPage = () => {\n  _s();\n  const [stops, setStops] = useState([]);\n  const [routes, setRoutes] = useState([]);\n  const [fromStop, setFromStop] = useState(\"\");\n  const [toStop, setToStop] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [searching, setSearching] = useState(false);\n  const [result, setResult] = useState(null);\n  const [error, setError] = useState(\"\");\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markersRef = useRef([]);\n  const routeLineRef = useRef(null);\n  const AGENCY_ID = \"607\";\n  const API_BASE = \"https://transloc-api-1-2.p.rapidapi.com\";\n  const API_KEY = process.env.REACT_APP_TRANSLOC_API_KEY || \"\";\n  const GT_CENTER = [33.7756, -84.3963];\n\n  // Custom marker icons\n  const startIcon = L.icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  });\n  const endIcon = L.icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  });\n  const stopIcon = L.icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n    iconSize: [20, 33],\n    iconAnchor: [10, 33],\n    popupAnchor: [1, -28],\n    shadowSize: [33, 33]\n  });\n  const defaultIcon = L.icon({\n    iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  });\n  useEffect(() => {\n    fetchStopsAndRoutes();\n  }, []);\n  useEffect(() => {\n    if (mapRef.current && !mapInstanceRef.current && stops.length > 0) {\n      initMap();\n    }\n  }, [stops]);\n  useEffect(() => {\n    if (result && mapInstanceRef.current) {\n      updateMap();\n    }\n  }, [result]);\n  const fetchStopsAndRoutes = async () => {\n    try {\n      var _stopsData$data, _routesData$data;\n      setLoading(true);\n      const headers = {\n        \"X-RapidAPI-Key\": API_KEY,\n        \"X-RapidAPI-Host\": \"transloc-api-1-2.p.rapidapi.com\"\n      };\n      const [stopsRes, routesRes] = await Promise.all([fetch(`${API_BASE}/stops.json?agencies=${AGENCY_ID}`, {\n        headers\n      }), fetch(`${API_BASE}/routes.json?agencies=${AGENCY_ID}`, {\n        headers\n      })]);\n      const stopsData = await stopsRes.json();\n      const routesData = await routesRes.json();\n      setStops(Object.values(((_stopsData$data = stopsData.data) === null || _stopsData$data === void 0 ? void 0 : _stopsData$data[AGENCY_ID]) || {}));\n      setRoutes(Object.values(((_routesData$data = routesData.data) === null || _routesData$data === void 0 ? void 0 : _routesData$data[AGENCY_ID]) || {}));\n    } catch (err) {\n      setError(\"‚ö†Ô∏è Failed to load bus data. Please check your API key.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const initMap = () => {\n    if (!mapRef.current || mapInstanceRef.current) return;\n    const map = L.map(mapRef.current).setView(GT_CENTER, 15);\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n    }).addTo(map);\n    mapInstanceRef.current = map;\n\n    // Add all stops to map initially\n    stops.forEach(stop => {\n      const marker = L.marker([stop.location.lat, stop.location.lng], {\n        icon: defaultIcon\n      }).bindPopup(`<strong>${stop.name}</strong>`).addTo(map);\n      markersRef.current.push(marker);\n    });\n  };\n  const clearMarkers = () => {\n    if (!mapInstanceRef.current) return;\n    markersRef.current.forEach(marker => {\n      var _mapInstanceRef$curre;\n      return (_mapInstanceRef$curre = mapInstanceRef.current) === null || _mapInstanceRef$curre === void 0 ? void 0 : _mapInstanceRef$curre.removeLayer(marker);\n    });\n    markersRef.current = [];\n    if (routeLineRef.current) {\n      mapInstanceRef.current.removeLayer(routeLineRef.current);\n      routeLineRef.current = null;\n    }\n  };\n  const updateMap = () => {\n    if (!result || !mapInstanceRef.current) return;\n    clearMarkers();\n    const {\n      fromStop,\n      toStop,\n      routeStops\n    } = result;\n\n    // Add start marker\n    const startMarker = L.marker([fromStop.location.lat, fromStop.location.lng], {\n      icon: startIcon\n    }).bindPopup(`<strong>üü¢ START</strong><br>${fromStop.name}`).addTo(mapInstanceRef.current);\n    markersRef.current.push(startMarker);\n\n    // Add end marker\n    const endMarker = L.marker([toStop.location.lat, toStop.location.lng], {\n      icon: endIcon\n    }).bindPopup(`<strong>üî¥ DESTINATION</strong><br>${toStop.name}`).addTo(mapInstanceRef.current);\n    markersRef.current.push(endMarker);\n\n    // Add intermediate stops\n    routeStops.filter(s => s.stop_id !== fromStop.stop_id && s.stop_id !== toStop.stop_id).forEach(stop => {\n      const marker = L.marker([stop.location.lat, stop.location.lng], {\n        icon: stopIcon\n      }).bindPopup(`<strong>${stop.name}</strong>`).addTo(mapInstanceRef.current);\n      markersRef.current.push(marker);\n    });\n\n    // Draw route line\n    const coordinates = routeStops.map(s => [s.location.lat, s.location.lng]);\n    routeLineRef.current = L.polyline(coordinates, {\n      color: '#3B82F6',\n      weight: 4,\n      opacity: 0.7\n    }).addTo(mapInstanceRef.current);\n\n    // Fit map to route\n    const bounds = L.latLngBounds(coordinates);\n    mapInstanceRef.current.fitBounds(bounds, {\n      padding: [50, 50]\n    });\n  };\n  const findOptimalRoute = async () => {\n    if (!fromStop || !toStop) {\n      setError(\"Please select both origin and destination stops.\");\n      return;\n    }\n    if (fromStop === toStop) {\n      setError(\"Origin and destination cannot be the same.\");\n      return;\n    }\n    setSearching(true);\n    setError(\"\");\n    setResult(null);\n    try {\n      const commonRoutes = routes.filter(route => {\n        const stopIds = route.stops || [];\n        return stopIds.includes(fromStop) && stopIds.includes(toStop);\n      });\n      if (commonRoutes.length === 0) {\n        setError(\"No direct routes found. Transfer may be required.\");\n        return;\n      }\n      const arrivalsRes = await fetch(`${API_BASE}/arrival-estimates.json?agencies=${AGENCY_ID}&stops=${fromStop}`, {\n        headers: {\n          \"X-RapidAPI-Key\": API_KEY,\n          \"X-RapidAPI-Host\": \"transloc-api-1-2.p.rapidapi.com\"\n        }\n      });\n      const arrivalsData = await arrivalsRes.json();\n      let bestRoute = null;\n      let earliestTime = Infinity;\n      for (const route of commonRoutes) {\n        var _arrivalsData$data, _arrivalsData$data$;\n        const arrivals = ((_arrivalsData$data = arrivalsData.data) === null || _arrivalsData$data === void 0 ? void 0 : (_arrivalsData$data$ = _arrivalsData$data[0]) === null || _arrivalsData$data$ === void 0 ? void 0 : _arrivalsData$data$.arrivals) || [];\n        const routeArrivals = arrivals.filter(a => a.route_id === route.route_id);\n        if (routeArrivals.length > 0) {\n          const nextArrival = new Date(routeArrivals[0].arrival_at).getTime();\n          if (nextArrival < earliestTime) {\n            earliestTime = nextArrival;\n            bestRoute = {\n              ...route,\n              nextArrival: routeArrivals[0].arrival_at,\n              minutesAway: Math.round((nextArrival - Date.now()) / 60000)\n            };\n          }\n        }\n      }\n      const selectedRoute = bestRoute || commonRoutes[0];\n      const fromStopData = stops.find(s => s.stop_id === fromStop);\n      const toStopData = stops.find(s => s.stop_id === toStop);\n\n      // Get all stops on the route between origin and destination\n      const routeStopIds = selectedRoute.stops || [];\n      const fromIndex = routeStopIds.indexOf(fromStop);\n      const toIndex = routeStopIds.indexOf(toStop);\n      const relevantStopIds = fromIndex < toIndex ? routeStopIds.slice(fromIndex, toIndex + 1) : routeStopIds.slice(toIndex, fromIndex + 1).reverse();\n      const routeStops = relevantStopIds.map(id => stops.find(s => s.stop_id === id)).filter(s => s !== undefined);\n      setResult({\n        route: selectedRoute,\n        fromStop: fromStopData,\n        toStop: toStopData,\n        allRoutes: commonRoutes,\n        routeStops\n      });\n    } catch (err) {\n      setError(\"‚ö†Ô∏è Failed to find route. Please try again.\");\n    } finally {\n      setSearching(false);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.center,\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDE8C Loading GT Bus Data...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\uD83D\\uDE8C Plan Your GT Trip\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Find the best bus route between two GT stops with visual map.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.gridContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.formPanel,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Plan Your Route\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.form,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\uD83D\\uDFE2 Starting Location\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: fromStop,\n            onChange: e => setFromStop(e.target.value),\n            className: styles.select,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select origin stop\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 15\n            }, this), stops.map(stop => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: stop.stop_id,\n              children: stop.name\n            }, stop.stop_id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\uD83D\\uDD34 Destination\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: toStop,\n            onChange: e => setToStop(e.target.value),\n            className: styles.select,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select destination stop\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 15\n            }, this), stops.map(stop => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: stop.stop_id,\n              children: stop.name\n            }, stop.stop_id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: findOptimalRoute,\n            disabled: searching,\n            children: searching ? \"Finding Route...\" : \"Find Best Route\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.error,\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this), result && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.result,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"\\u2705 Best Route: \", result.route.long_name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 15\n          }, this), result.route.minutesAway !== undefined && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.highlight,\n            children: [\"\\uD83D\\uDD52 Next bus in \", result.route.minutesAway, \" min\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\uD83D\\uDFE2 From: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: result.fromStop.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 26\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\uD83D\\uDD34 To: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: result.toStop.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 24\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.stats,\n            children: [\"\\uD83D\\uDCCD Stops on route: \", result.routeStops.length]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 15\n          }, this), result.allRoutes.length > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.alternatives,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Alternative routes:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 22\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 19\n            }, this), result.allRoutes.filter(r => r.route_id !== result.route.route_id).map(r => /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"\\u2022 \", r.long_name]\n            }, r.route_id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 23\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.mapPanel,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: mapRef,\n          className: styles.map\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      className: styles.linkButton,\n      children: \"\\u2190 Return Home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 304,\n    columnNumber: 5\n  }, this);\n};\n_s(PlanTripPage, \"exJPj9af4AbCVId/adnf/zmbCXU=\");\n_c = PlanTripPage;\nexport default PlanTripPage;\nvar _c;\n$RefreshReg$(_c, \"PlanTripPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","L","styles","jsxDEV","_jsxDEV","PlanTripPage","_s","stops","setStops","routes","setRoutes","fromStop","setFromStop","toStop","setToStop","loading","setLoading","searching","setSearching","result","setResult","error","setError","mapRef","mapInstanceRef","markersRef","routeLineRef","AGENCY_ID","API_BASE","API_KEY","process","env","REACT_APP_TRANSLOC_API_KEY","GT_CENTER","startIcon","icon","iconUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","endIcon","stopIcon","defaultIcon","fetchStopsAndRoutes","current","length","initMap","updateMap","_stopsData$data","_routesData$data","headers","stopsRes","routesRes","Promise","all","fetch","stopsData","json","routesData","Object","values","data","err","map","setView","tileLayer","attribution","addTo","forEach","stop","marker","location","lat","lng","bindPopup","name","push","clearMarkers","_mapInstanceRef$curre","removeLayer","routeStops","startMarker","endMarker","filter","s","stop_id","coordinates","polyline","color","weight","opacity","bounds","latLngBounds","fitBounds","padding","findOptimalRoute","commonRoutes","route","stopIds","includes","arrivalsRes","arrivalsData","bestRoute","earliestTime","Infinity","_arrivalsData$data","_arrivalsData$data$","arrivals","routeArrivals","a","route_id","nextArrival","Date","arrival_at","getTime","minutesAway","Math","round","now","selectedRoute","fromStopData","find","toStopData","routeStopIds","fromIndex","indexOf","toIndex","relevantStopIds","slice","reverse","id","undefined","allRoutes","className","center","children","fileName","_jsxFileName","lineNumber","columnNumber","container","gridContainer","formPanel","form","value","onChange","e","target","select","onClick","disabled","long_name","highlight","stats","alternatives","r","mapPanel","ref","to","linkButton","_c","$RefreshReg$"],"sources":["/Users/joshuayi/Documents/stinger-delay/Data-Viz/src/features/planTrip/PlanTripPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport styles from \"./PlanTripPage.module.css\";\n\ninterface Stop {\n  stop_id: string;\n  name: string;\n  location: {\n    lat: number;\n    lng: number;\n  };\n}\n\ninterface Route {\n  route_id: string;\n  long_name: string;\n  short_name?: string;\n  stops?: string[];\n  minutesAway?: number;\n  nextArrival?: string;\n}\n\ninterface RouteResult {\n  route: Route;\n  fromStop: Stop;\n  toStop: Stop;\n  allRoutes: Route[];\n  routeStops: Stop[];\n}\n\nconst PlanTripPage: React.FC = () => {\n  const [stops, setStops] = useState<Stop[]>([]);\n  const [routes, setRoutes] = useState<Route[]>([]);\n  const [fromStop, setFromStop] = useState<string>(\"\");\n  const [toStop, setToStop] = useState<string>(\"\");\n  const [loading, setLoading] = useState<boolean>(true);\n  const [searching, setSearching] = useState<boolean>(false);\n  const [result, setResult] = useState<RouteResult | null>(null);\n  const [error, setError] = useState<string>(\"\");\n\n  const mapRef = useRef<HTMLDivElement>(null);\n  const mapInstanceRef = useRef<L.Map | null>(null);\n  const markersRef = useRef<L.Marker[]>([]);\n  const routeLineRef = useRef<L.Polyline | null>(null);\n\n  const AGENCY_ID = \"607\";\n  const API_BASE = \"https://transloc-api-1-2.p.rapidapi.com\";\n  const API_KEY: string = process.env.REACT_APP_TRANSLOC_API_KEY || \"\";\n  const GT_CENTER: [number, number] = [33.7756, -84.3963];\n\n  // Custom marker icons\n  const startIcon = L.icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  });\n\n  const endIcon = L.icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  });\n\n  const stopIcon = L.icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n    iconSize: [20, 33],\n    iconAnchor: [10, 33],\n    popupAnchor: [1, -28],\n    shadowSize: [33, 33]\n  });\n\n  const defaultIcon = L.icon({\n    iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  });\n\n  useEffect(() => {\n    fetchStopsAndRoutes();\n  }, []);\n\n  useEffect(() => {\n    if (mapRef.current && !mapInstanceRef.current && stops.length > 0) {\n      initMap();\n    }\n  }, [stops]);\n\n  useEffect(() => {\n    if (result && mapInstanceRef.current) {\n      updateMap();\n    }\n  }, [result]);\n\n  const fetchStopsAndRoutes = async () => {\n    try {\n      setLoading(true);\n\n      const headers: Record<string, string> = {\n        \"X-RapidAPI-Key\": API_KEY,\n        \"X-RapidAPI-Host\": \"transloc-api-1-2.p.rapidapi.com\",\n      };\n\n      const [stopsRes, routesRes] = await Promise.all([\n        fetch(`${API_BASE}/stops.json?agencies=${AGENCY_ID}`, { headers }),\n        fetch(`${API_BASE}/routes.json?agencies=${AGENCY_ID}`, { headers }),\n      ]);\n\n      const stopsData = await stopsRes.json();\n      const routesData = await routesRes.json();\n\n      setStops(Object.values(stopsData.data?.[AGENCY_ID] || {}));\n      setRoutes(Object.values(routesData.data?.[AGENCY_ID] || {}));\n    } catch (err) {\n      setError(\"‚ö†Ô∏è Failed to load bus data. Please check your API key.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const initMap = () => {\n    if (!mapRef.current || mapInstanceRef.current) return;\n\n    const map = L.map(mapRef.current).setView(GT_CENTER, 15);\n    \n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n    }).addTo(map);\n\n    mapInstanceRef.current = map;\n\n    // Add all stops to map initially\n    stops.forEach(stop => {\n      const marker = L.marker([stop.location.lat, stop.location.lng], { icon: defaultIcon })\n        .bindPopup(`<strong>${stop.name}</strong>`)\n        .addTo(map);\n      markersRef.current.push(marker);\n    });\n  };\n\n  const clearMarkers = () => {\n    if (!mapInstanceRef.current) return;\n\n    markersRef.current.forEach(marker => mapInstanceRef.current?.removeLayer(marker));\n    markersRef.current = [];\n    \n    if (routeLineRef.current) {\n      mapInstanceRef.current.removeLayer(routeLineRef.current);\n      routeLineRef.current = null;\n    }\n  };\n\n  const updateMap = () => {\n    if (!result || !mapInstanceRef.current) return;\n\n    clearMarkers();\n\n    const { fromStop, toStop, routeStops } = result;\n\n    // Add start marker\n    const startMarker = L.marker([fromStop.location.lat, fromStop.location.lng], { icon: startIcon })\n      .bindPopup(`<strong>üü¢ START</strong><br>${fromStop.name}`)\n      .addTo(mapInstanceRef.current);\n    markersRef.current.push(startMarker);\n\n    // Add end marker\n    const endMarker = L.marker([toStop.location.lat, toStop.location.lng], { icon: endIcon })\n      .bindPopup(`<strong>üî¥ DESTINATION</strong><br>${toStop.name}`)\n      .addTo(mapInstanceRef.current);\n    markersRef.current.push(endMarker);\n\n    // Add intermediate stops\n    routeStops\n      .filter(s => s.stop_id !== fromStop.stop_id && s.stop_id !== toStop.stop_id)\n      .forEach(stop => {\n        const marker = L.marker([stop.location.lat, stop.location.lng], { icon: stopIcon })\n          .bindPopup(`<strong>${stop.name}</strong>`)\n          .addTo(mapInstanceRef.current!);\n        markersRef.current.push(marker);\n      });\n\n    // Draw route line\n    const coordinates: [number, number][] = routeStops.map(s => [s.location.lat, s.location.lng]);\n    routeLineRef.current = L.polyline(coordinates, {\n      color: '#3B82F6',\n      weight: 4,\n      opacity: 0.7\n    }).addTo(mapInstanceRef.current);\n\n    // Fit map to route\n    const bounds = L.latLngBounds(coordinates);\n    mapInstanceRef.current.fitBounds(bounds, { padding: [50, 50] });\n  };\n\n  const findOptimalRoute = async () => {\n    if (!fromStop || !toStop) {\n      setError(\"Please select both origin and destination stops.\");\n      return;\n    }\n\n    if (fromStop === toStop) {\n      setError(\"Origin and destination cannot be the same.\");\n      return;\n    }\n\n    setSearching(true);\n    setError(\"\");\n    setResult(null);\n\n    try {\n      const commonRoutes = routes.filter((route) => {\n        const stopIds = route.stops || [];\n        return stopIds.includes(fromStop) && stopIds.includes(toStop);\n      });\n\n      if (commonRoutes.length === 0) {\n        setError(\"No direct routes found. Transfer may be required.\");\n        return;\n      }\n\n      const arrivalsRes = await fetch(\n        `${API_BASE}/arrival-estimates.json?agencies=${AGENCY_ID}&stops=${fromStop}`,\n        {\n          headers: {\n            \"X-RapidAPI-Key\": API_KEY,\n            \"X-RapidAPI-Host\": \"transloc-api-1-2.p.rapidapi.com\",\n          } as Record<string, string>,\n        }\n      );\n      const arrivalsData = await arrivalsRes.json();\n\n      let bestRoute: Route | null = null;\n      let earliestTime = Infinity;\n\n      for (const route of commonRoutes) {\n        const arrivals = arrivalsData.data?.[0]?.arrivals || [];\n        const routeArrivals = arrivals.filter(\n          (a: any) => a.route_id === route.route_id\n        );\n        if (routeArrivals.length > 0) {\n          const nextArrival = new Date(routeArrivals[0].arrival_at).getTime();\n          if (nextArrival < earliestTime) {\n            earliestTime = nextArrival;\n            bestRoute = {\n              ...route,\n              nextArrival: routeArrivals[0].arrival_at,\n              minutesAway: Math.round((nextArrival - Date.now()) / 60000),\n            };\n          }\n        }\n      }\n\n      const selectedRoute = bestRoute || commonRoutes[0];\n      const fromStopData = stops.find((s) => s.stop_id === fromStop)!;\n      const toStopData = stops.find((s) => s.stop_id === toStop)!;\n\n      // Get all stops on the route between origin and destination\n      const routeStopIds = selectedRoute.stops || [];\n      const fromIndex = routeStopIds.indexOf(fromStop);\n      const toIndex = routeStopIds.indexOf(toStop);\n      \n      const relevantStopIds = fromIndex < toIndex \n        ? routeStopIds.slice(fromIndex, toIndex + 1)\n        : routeStopIds.slice(toIndex, fromIndex + 1).reverse();\n\n      const routeStops = relevantStopIds\n        .map(id => stops.find(s => s.stop_id === id))\n        .filter((s): s is Stop => s !== undefined);\n\n      setResult({\n        route: selectedRoute,\n        fromStop: fromStopData,\n        toStop: toStopData,\n        allRoutes: commonRoutes,\n        routeStops,\n      });\n    } catch (err) {\n      setError(\"‚ö†Ô∏è Failed to find route. Please try again.\");\n    } finally {\n      setSearching(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className={styles.center}>\n        <h2>üöå Loading GT Bus Data...</h2>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.container}>\n      <h1>üöå Plan Your GT Trip</h1>\n      <p>Find the best bus route between two GT stops with visual map.</p>\n\n      <div className={styles.gridContainer}>\n        <div className={styles.formPanel}>\n          <h2>Plan Your Route</h2>\n\n          <div className={styles.form}>\n            <label>üü¢ Starting Location</label>\n            <select\n              value={fromStop}\n              onChange={(e) => setFromStop(e.target.value)}\n              className={styles.select}\n            >\n              <option value=\"\">Select origin stop</option>\n              {stops.map((stop) => (\n                <option key={stop.stop_id} value={stop.stop_id}>\n                  {stop.name}\n                </option>\n              ))}\n            </select>\n\n            <label>üî¥ Destination</label>\n            <select\n              value={toStop}\n              onChange={(e) => setToStop(e.target.value)}\n              className={styles.select}\n            >\n              <option value=\"\">Select destination stop</option>\n              {stops.map((stop) => (\n                <option key={stop.stop_id} value={stop.stop_id}>\n                  {stop.name}\n                </option>\n              ))}\n            </select>\n\n            <button onClick={findOptimalRoute} disabled={searching}>\n              {searching ? \"Finding Route...\" : \"Find Best Route\"}\n            </button>\n\n            {error && <p className={styles.error}>{error}</p>}\n          </div>\n\n          {result && (\n            <div className={styles.result}>\n              <h2>‚úÖ Best Route: {result.route.long_name}</h2>\n              {result.route.minutesAway !== undefined && (\n                <p className={styles.highlight}>üïí Next bus in {result.route.minutesAway} min</p>\n              )}\n              <p>\n                üü¢ From: <strong>{result.fromStop.name}</strong>\n              </p>\n              <p>\n                üî¥ To: <strong>{result.toStop.name}</strong>\n              </p>\n              <p className={styles.stats}>\n                üìç Stops on route: {result.routeStops.length}\n              </p>\n              \n              {result.allRoutes.length > 1 && (\n                <div className={styles.alternatives}>\n                  <p><strong>Alternative routes:</strong></p>\n                  {result.allRoutes\n                    .filter(r => r.route_id !== result.route.route_id)\n                    .map(r => (\n                      <p key={r.route_id}>‚Ä¢ {r.long_name}</p>\n                    ))\n                  }\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n\n        <div className={styles.mapPanel}>\n          <div ref={mapRef} className={styles.map}></div>\n        </div>\n      </div>\n\n      <Link to=\"/\" className={styles.linkButton}>\n        ‚Üê Return Home\n      </Link>\n    </div>\n  );\n};\n\nexport default PlanTripPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}