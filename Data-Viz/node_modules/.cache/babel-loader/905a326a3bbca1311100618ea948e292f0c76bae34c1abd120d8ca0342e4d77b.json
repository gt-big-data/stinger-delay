{"ast":null,"code":"var _jsxFileName = \"/Users/joshuayi/Documents/stinger-delay/Data-Viz/src/features/planTrip/PlanTripPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport styles from \"./PlanTripPage.module.css\";\nimport { mockRoutes } from \"../../lib/mocks/mockTripData\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PlanTripPage = () => {\n  _s();\n  const [routes, setRoutes] = useState([]);\n  const [stops, setStops] = useState([]);\n  const [fromLocation, setFromLocation] = useState(\"\");\n  const [toLocation, setToLocation] = useState(\"\");\n  const [fromCoords, setFromCoords] = useState(null);\n  const [toCoords, setToCoords] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [searching, setSearching] = useState(false);\n  const [result, setResult] = useState(null);\n  const [error, setError] = useState(\"\");\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markersRef = useRef([]);\n  const routeLineRef = useRef([]);\n  const GT_CENTER = [33.7756, -84.3963];\n\n  // Expanded list of GT locations\n  const popularLocations = [{\n    name: \"Student Center\",\n    lat: 33.7738,\n    lng: -84.3986\n  }, {\n    name: \"Klaus Advanced Computing Building\",\n    lat: 33.7772,\n    lng: -84.3956\n  }, {\n    name: \"Tech Square\",\n    lat: 33.7764,\n    lng: -84.3889\n  }, {\n    name: \"Campus Recreation Center (CRC)\",\n    lat: 33.7758,\n    lng: -84.4025\n  }, {\n    name: \"Price Gilbert Library\",\n    lat: 33.7746,\n    lng: -84.3967\n  }, {\n    name: \"Bobby Dodd Stadium\",\n    lat: 33.7722,\n    lng: -84.3922\n  }, {\n    name: \"Midtown MARTA Station\",\n    lat: 33.7812,\n    lng: -84.3867\n  }, {\n    name: \"College of Computing\",\n    lat: 33.7778,\n    lng: -84.3975\n  }, {\n    name: \"Clough Undergraduate Learning Commons\",\n    lat: 33.7751,\n    lng: -84.3963\n  }, {\n    name: \"Kendeda Building\",\n    lat: 33.7773,\n    lng: -84.4005\n  }, {\n    name: \"Van Leer Building\",\n    lat: 33.7758,\n    lng: -84.3968\n  }, {\n    name: \"Howey Physics Building\",\n    lat: 33.7775,\n    lng: -84.3990\n  }, {\n    name: \"Molecular Science Building\",\n    lat: 33.7783,\n    lng: -84.3994\n  }, {\n    name: \"Instructional Center\",\n    lat: 33.7754,\n    lng: -84.3982\n  }, {\n    name: \"Skiles Classroom Building\",\n    lat: 33.7741,\n    lng: -84.3955\n  }, {\n    name: \"Weber Space Science Building\",\n    lat: 33.7725,\n    lng: -84.3951\n  }, {\n    name: \"Ferst Center for the Arts\",\n    lat: 33.7732,\n    lng: -84.3977\n  }, {\n    name: \"North Avenue Apartments\",\n    lat: 33.7780,\n    lng: -84.4035\n  }, {\n    name: \"East Campus Apartments\",\n    lat: 33.7705,\n    lng: -84.3880\n  }, {\n    name: \"Georgia Tech Hotel\",\n    lat: 33.7763,\n    lng: -84.3878\n  }, {\n    name: \"GTRI Research Building\",\n    lat: 33.7820,\n    lng: -84.3870\n  }, {\n    name: \"Techwood Drive Apartments\",\n    lat: 33.7695,\n    lng: -84.3850\n  }, {\n    name: \"Curran Parking Deck\",\n    lat: 33.7795,\n    lng: -84.4010\n  }, {\n    name: \"Fifth Street Bridge\",\n    lat: 33.7775,\n    lng: -84.3910\n  }, {\n    name: \"Manufacture Building\",\n    lat: 33.7765,\n    lng: -84.4015\n  }];\n\n  // Custom marker icons (same as before)\n  const startIcon = L.icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  });\n  const endIcon = L.icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  });\n  const transferIcon = L.icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-orange.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  });\n  const stopIcon = L.icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n    iconSize: [20, 33],\n    iconAnchor: [10, 33],\n    popupAnchor: [1, -28],\n    shadowSize: [33, 33]\n  });\n  useEffect(() => {\n    loadMockData();\n  }, []);\n  useEffect(() => {\n    if (mapRef.current && !mapInstanceRef.current && stops.length > 0) {\n      initMap();\n    }\n  }, [stops]);\n  useEffect(() => {\n    if (result && mapInstanceRef.current) {\n      updateMap();\n    }\n  }, [result]);\n  const loadMockData = () => {\n    setLoading(true);\n    setRoutes(mockRoutes);\n    const allStops = [];\n    const stopIds = new Set();\n    mockRoutes.forEach(route => {\n      route.stops.forEach(stop => {\n        if (!stopIds.has(stop.id)) {\n          stopIds.add(stop.id);\n          allStops.push(stop);\n        }\n      });\n    });\n    setStops(allStops);\n    setLoading(false);\n  };\n  const initMap = () => {\n    if (!mapRef.current || mapInstanceRef.current) return;\n    const map = L.map(mapRef.current).setView(GT_CENTER, 15);\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n    }).addTo(map);\n    mapInstanceRef.current = map;\n  };\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\n    const toRadian = angle => Math.PI / 180 * angle;\n    const R = 6371;\n    const dLat = toRadian(lat2 - lat1);\n    const dLon = toRadian(lon2 - lon1);\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(toRadian(lat1)) * Math.cos(toRadian(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    const distance = R * c;\n    return distance;\n  };\n  const findNearestStop = (lat, lng) => {\n    let nearestStop = stops[0];\n    let minDistance = calculateDistance(lat, lng, stops[0].latitude, stops[0].longitude);\n    stops.forEach(stop => {\n      const distance = calculateDistance(lat, lng, stop.latitude, stop.longitude);\n      if (distance < minDistance) {\n        minDistance = distance;\n        nearestStop = stop;\n      }\n    });\n    return nearestStop;\n  };\n  const handleFromLocationSelect = e => {\n    const locationName = e.target.value;\n    setFromLocation(locationName);\n    const location = popularLocations.find(loc => loc.name === locationName);\n    if (location) {\n      setFromCoords({\n        lat: location.lat,\n        lng: location.lng\n      });\n    }\n  };\n  const handleToLocationSelect = e => {\n    const locationName = e.target.value;\n    setToLocation(locationName);\n    const location = popularLocations.find(loc => loc.name === locationName);\n    if (location) {\n      setToCoords({\n        lat: location.lat,\n        lng: location.lng\n      });\n    }\n  };\n  const clearMarkers = () => {\n    if (!mapInstanceRef.current) return;\n    if (markersRef.current && markersRef.current.length > 0) {\n      markersRef.current.forEach(marker => {\n        if (marker && mapInstanceRef.current) {\n          mapInstanceRef.current.removeLayer(marker);\n        }\n      });\n    }\n    markersRef.current = [];\n    if (routeLineRef.current && routeLineRef.current.length > 0) {\n      routeLineRef.current.forEach(line => {\n        if (line && mapInstanceRef.current) {\n          mapInstanceRef.current.removeLayer(line);\n        }\n      });\n    }\n    routeLineRef.current = [];\n  };\n  const updateMap = () => {\n    if (!result || !mapInstanceRef.current) return;\n    clearMarkers();\n    const allCoordinates = [];\n    const colors = ['#3B82F6', '#10B981', '#8B5CF6', '#F59E0B', '#EC4899'];\n    if (fromCoords) {\n      allCoordinates.push([fromCoords.lat, fromCoords.lng]);\n      const marker = L.marker([fromCoords.lat, fromCoords.lng], {\n        icon: startIcon\n      }).bindPopup(`<strong>üèÅ YOUR LOCATION</strong><br>${fromLocation}<br>Walk to ${result.startStop.name}`).addTo(mapInstanceRef.current);\n      markersRef.current.push(marker);\n      const walkLine = L.polyline([[fromCoords.lat, fromCoords.lng], [result.startStop.latitude, result.startStop.longitude]], {\n        color: '#6B7280',\n        weight: 3,\n        opacity: 0.6,\n        dashArray: '5, 10'\n      }).addTo(mapInstanceRef.current);\n      routeLineRef.current.push(walkLine);\n    }\n    result.segments.forEach((segment, index) => {\n      const coordinates = segment.stops.map(s => [s.latitude, s.longitude]);\n      allCoordinates.push(...coordinates);\n      const line = L.polyline(coordinates, {\n        color: colors[index % colors.length],\n        weight: 4,\n        opacity: 0.7\n      }).addTo(mapInstanceRef.current);\n      routeLineRef.current.push(line);\n      segment.stops.forEach((stop, stopIndex) => {\n        let icon = stopIcon;\n        let popupText = `<strong>${stop.name}</strong>`;\n        if (stopIndex === 0 && index > 0) {\n          icon = transferIcon;\n          popupText = `<strong>üîÑ TRANSFER ${index}</strong><br>${stop.name}<br>Switch to ${segment.route.name}`;\n        } else if (stopIndex === segment.stops.length - 1 && index < result.segments.length - 1) {\n          icon = transferIcon;\n          popupText = `<strong>üîÑ TRANSFER ${index + 1}</strong><br>${stop.name}<br>Switch to ${result.segments[index + 1].route.name}`;\n        }\n        const marker = L.marker([stop.latitude, stop.longitude], {\n          icon\n        }).bindPopup(popupText).addTo(mapInstanceRef.current);\n        markersRef.current.push(marker);\n      });\n    });\n    if (toCoords) {\n      allCoordinates.push([toCoords.lat, toCoords.lng]);\n      const marker = L.marker([toCoords.lat, toCoords.lng], {\n        icon: endIcon\n      }).bindPopup(`<strong>üéØ DESTINATION</strong><br>${toLocation}<br>Walk from ${result.endStop.name}`).addTo(mapInstanceRef.current);\n      markersRef.current.push(marker);\n      const walkLine = L.polyline([[result.endStop.latitude, result.endStop.longitude], [toCoords.lat, toCoords.lng]], {\n        color: '#6B7280',\n        weight: 3,\n        opacity: 0.6,\n        dashArray: '5, 10'\n      }).addTo(mapInstanceRef.current);\n      routeLineRef.current.push(walkLine);\n    }\n    if (allCoordinates.length > 0) {\n      const bounds = L.latLngBounds(allCoordinates);\n      mapInstanceRef.current.fitBounds(bounds, {\n        padding: [50, 50]\n      });\n    }\n  };\n  const findOptimalRoute = () => {\n    if (!fromCoords || !toCoords) {\n      setError(\"Please select both starting location and destination.\");\n      return;\n    }\n    if (fromLocation === toLocation) {\n      setError(\"Starting location and destination cannot be the same.\");\n      return;\n    }\n    setSearching(true);\n    setError(\"\");\n    setResult(null);\n    setTimeout(() => {\n      try {\n        const startStop = findNearestStop(fromCoords.lat, fromCoords.lng);\n        const endStop = findNearestStop(toCoords.lat, toCoords.lng);\n        const walkDistStart = calculateDistance(fromCoords.lat, fromCoords.lng, startStop.latitude, startStop.longitude);\n        const walkDistEnd = calculateDistance(toCoords.lat, toCoords.lng, endStop.latitude, endStop.longitude);\n        console.log(`Nearest start stop: ${startStop.name} (${(walkDistStart * 1000).toFixed(0)}m away)`);\n        console.log(`Nearest end stop: ${endStop.name} (${(walkDistEnd * 1000).toFixed(0)}m away)`);\n        const result = findRouteWithBFS(startStop.id, endStop.id);\n        if (result) {\n          setResult({\n            ...result,\n            startStop,\n            endStop,\n            walkingDistanceStart: walkDistStart,\n            walkingDistanceEnd: walkDistEnd\n          });\n        } else {\n          setError(\"No routes found between these locations. Try different locations.\");\n        }\n      } catch (err) {\n        setError(\"‚ö†Ô∏è Failed to find route. Please try again.\");\n        console.error(err);\n      } finally {\n        setSearching(false);\n      }\n    }, 500);\n  };\n\n  // Fixed BFS algorithm\n  const findRouteWithBFS = (startStopId, endStopId) => {\n    console.log('=== Starting BFS from', startStopId, 'to', endStopId, '===');\n    if (startStopId === endStopId) {\n      console.log('Start and end are the same!');\n      return null;\n    }\n    const queue = [];\n    const visited = new Map();\n\n    // Initialize: Find all routes that have the start stop\n    routes.forEach(route => {\n      const stopIdx = route.stops.findIndex(s => s.id === startStopId);\n      if (stopIdx !== -1) {\n        console.log(`Found start stop in route: ${route.name}`);\n        queue.push({\n          stopId: startStopId,\n          routeId: route.id,\n          segments: [],\n          visitedStops: new Set([startStopId])\n        });\n      }\n    });\n    console.log(`Starting with ${queue.length} routes`);\n    let iterations = 0;\n    const maxIterations = 1000;\n    while (queue.length > 0 && iterations < maxIterations) {\n      iterations++;\n      const current = queue.shift();\n\n      // Mark as visited\n      const key = `${current.stopId}-${current.routeId}`;\n      if (visited.has(current.stopId)) {\n        if (visited.get(current.stopId).has(current.routeId)) {\n          continue;\n        }\n        visited.get(current.stopId).add(current.routeId);\n      } else {\n        visited.set(current.stopId, new Set([current.routeId]));\n      }\n      const currentRoute = routes.find(r => r.id === current.routeId);\n      if (!currentRoute) continue;\n      const currentStopIdx = currentRoute.stops.findIndex(s => s.id === current.stopId);\n      if (currentStopIdx === -1) continue;\n\n      // Explore all stops forward on this route\n      for (let i = currentStopIdx + 1; i < currentRoute.stops.length; i++) {\n        const nextStop = currentRoute.stops[i];\n\n        // Found the destination!\n        if (nextStop.id === endStopId) {\n          const finalSegment = {\n            route: currentRoute,\n            fromStop: currentRoute.stops[currentStopIdx],\n            toStop: nextStop,\n            stops: currentRoute.stops.slice(currentStopIdx, i + 1)\n          };\n          const allSegments = [...current.segments, finalSegment];\n          console.log(`‚úÖ Found route with ${allSegments.length} segments!`);\n          return {\n            segments: allSegments,\n            totalStops: allSegments.reduce((sum, seg) => sum + seg.stops.length, 0),\n            transfers: allSegments.length - 1\n          };\n        }\n\n        // Skip already visited stops\n        if (current.visitedStops.has(nextStop.id)) continue;\n\n        // Check for transfer opportunities at this stop\n        routes.forEach(transferRoute => {\n          if (transferRoute.id === currentRoute.id) return;\n          const transferStopIdx = transferRoute.stops.findIndex(s => s.id === nextStop.id || s.name === nextStop.name);\n          if (transferStopIdx !== -1) {\n            // Create segment to this transfer point\n            const segmentToTransfer = {\n              route: currentRoute,\n              fromStop: currentRoute.stops[currentStopIdx],\n              toStop: nextStop,\n              stops: currentRoute.stops.slice(currentStopIdx, i + 1)\n            };\n            const newVisited = new Set(current.visitedStops);\n            newVisited.add(nextStop.id);\n            queue.push({\n              stopId: nextStop.id,\n              routeId: transferRoute.id,\n              segments: [...current.segments, segmentToTransfer],\n              visitedStops: newVisited\n            });\n          }\n        });\n      }\n    }\n    console.log(`‚ùå No route found after ${iterations} iterations`);\n    return null;\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.center,\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDE8C Loading GT Bus Data...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\uD83D\\uDE8C Plan Your GT Trip\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 495,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Enter your location and destination - we'll find the best route with unlimited transfers!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 496,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.gridContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.formPanel,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Plan Your Route\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.form,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\uD83C\\uDFC1 Starting Location\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 503,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: fromLocation,\n            onChange: handleFromLocationSelect,\n            className: styles.select,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select starting location\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 509,\n              columnNumber: 15\n            }, this), popularLocations.map(loc => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: loc.name,\n              children: loc.name\n            }, loc.name, false, {\n              fileName: _jsxFileName,\n              lineNumber: 511,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 504,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\uD83C\\uDFAF Destination\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: toLocation,\n            onChange: handleToLocationSelect,\n            className: styles.select,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select destination\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 523,\n              columnNumber: 15\n            }, this), popularLocations.map(loc => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: loc.name,\n              children: loc.name\n            }, loc.name, false, {\n              fileName: _jsxFileName,\n              lineNumber: 525,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 518,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: findOptimalRoute,\n            disabled: searching,\n            children: searching ? \"Finding Route...\" : \"Find Best Route\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.error,\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 535,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 11\n        }, this), result && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.result,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u2705 Route Found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 540,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.highlight,\n            children: result.transfers === 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: \"\\uD83D\\uDE8C Direct route - No transfers needed!\"\n            }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [\"\\uD83D\\uDD04 \", result.transfers, \" transfer\", result.transfers > 1 ? 's' : '', \" required\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.walking,\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"\\uD83D\\uDEB6 Walk \", (result.walkingDistanceStart * 1000).toFixed(0), \"m to \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: result.startStop.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 550,\n                columnNumber: 82\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 549,\n            columnNumber: 15\n          }, this), result.segments.map((segment, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.segment,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [index === 0 ? 'üü¢' : 'üîÑ', \" \", segment.route.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Board at: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: segment.fromStop.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 558,\n                columnNumber: 32\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Ride \", segment.stops.length - 1, \" stop\", segment.stops.length > 2 ? 's' : '']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 559,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Exit at: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: segment.toStop.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 560,\n                columnNumber: 31\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 560,\n              columnNumber: 19\n            }, this), index < result.segments.length - 1 && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.transfer,\n              children: [\"\\u2193 Transfer to \", result.segments[index + 1].route.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 562,\n              columnNumber: 21\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 17\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.walking,\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"\\uD83D\\uDEB6 Walk \", (result.walkingDistanceEnd * 1000).toFixed(0), \"m to destination\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 570,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.stats,\n            children: [\"Total: \", result.totalStops, \" bus stops + \", ((result.walkingDistanceStart + result.walkingDistanceEnd) * 1000).toFixed(0), \"m walking\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.mapPanel,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: mapRef,\n          className: styles.map\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 580,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      className: styles.linkButton,\n      children: \"\\u2190 Return Home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 585,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 494,\n    columnNumber: 5\n  }, this);\n};\n_s(PlanTripPage, \"BJkWI6YcChkCwBdhobILpv/9/gE=\");\n_c = PlanTripPage;\nexport default PlanTripPage;\nvar _c;\n$RefreshReg$(_c, \"PlanTripPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","L","styles","mockRoutes","jsxDEV","_jsxDEV","Fragment","_Fragment","PlanTripPage","_s","routes","setRoutes","stops","setStops","fromLocation","setFromLocation","toLocation","setToLocation","fromCoords","setFromCoords","toCoords","setToCoords","loading","setLoading","searching","setSearching","result","setResult","error","setError","mapRef","mapInstanceRef","markersRef","routeLineRef","GT_CENTER","popularLocations","name","lat","lng","startIcon","icon","iconUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","endIcon","transferIcon","stopIcon","loadMockData","current","length","initMap","updateMap","allStops","stopIds","Set","forEach","route","stop","has","id","add","push","map","setView","tileLayer","attribution","addTo","calculateDistance","lat1","lon1","lat2","lon2","toRadian","angle","Math","PI","R","dLat","dLon","a","sin","cos","c","atan2","sqrt","distance","findNearestStop","nearestStop","minDistance","latitude","longitude","handleFromLocationSelect","e","locationName","target","value","location","find","loc","handleToLocationSelect","clearMarkers","marker","removeLayer","line","allCoordinates","colors","bindPopup","startStop","walkLine","polyline","color","weight","opacity","dashArray","segments","segment","index","coordinates","s","stopIndex","popupText","endStop","bounds","latLngBounds","fitBounds","padding","findOptimalRoute","setTimeout","walkDistStart","walkDistEnd","console","log","toFixed","findRouteWithBFS","walkingDistanceStart","walkingDistanceEnd","err","startStopId","endStopId","queue","visited","Map","stopIdx","findIndex","stopId","routeId","visitedStops","iterations","maxIterations","shift","key","get","set","currentRoute","r","currentStopIdx","i","nextStop","finalSegment","fromStop","toStop","slice","allSegments","totalStops","reduce","sum","seg","transfers","transferRoute","transferStopIdx","segmentToTransfer","newVisited","className","center","children","fileName","_jsxFileName","lineNumber","columnNumber","container","gridContainer","formPanel","form","onChange","select","onClick","disabled","highlight","walking","transfer","stats","mapPanel","ref","to","linkButton","_c","$RefreshReg$"],"sources":["/Users/joshuayi/Documents/stinger-delay/Data-Viz/src/features/planTrip/PlanTripPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport styles from \"./PlanTripPage.module.css\";\nimport { Route } from \"@/types/route\";\nimport { Stop } from \"@/types/stop\";\nimport { mockRoutes } from \"../../lib/mocks/mockTripData\";\n\ninterface RouteSegment {\n  route: Route;\n  fromStop: Stop;\n  toStop: Stop;\n  stops: Stop[];\n}\n\ninterface RouteResult {\n  segments: RouteSegment[];\n  totalStops: number;\n  transfers: number;\n  startStop: Stop;\n  endStop: Stop;\n  walkingDistanceStart: number;\n  walkingDistanceEnd: number;\n}\n\nconst PlanTripPage: React.FC = () => {\n  const [routes, setRoutes] = useState<Route[]>([]);\n  const [stops, setStops] = useState<Stop[]>([]);\n  const [fromLocation, setFromLocation] = useState<string>(\"\");\n  const [toLocation, setToLocation] = useState<string>(\"\");\n  const [fromCoords, setFromCoords] = useState<{lat: number, lng: number} | null>(null);\n  const [toCoords, setToCoords] = useState<{lat: number, lng: number} | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [searching, setSearching] = useState<boolean>(false);\n  const [result, setResult] = useState<RouteResult | null>(null);\n  const [error, setError] = useState<string>(\"\");\n\n  const mapRef = useRef<HTMLDivElement>(null);\n  const mapInstanceRef = useRef<L.Map | null>(null);\n  const markersRef = useRef<L.Marker[]>([]);\n  const routeLineRef = useRef<L.Polyline[]>([]);\n\n  const GT_CENTER: [number, number] = [33.7756, -84.3963];\n\n  // Expanded list of GT locations\n  const popularLocations = [\n    { name: \"Student Center\", lat: 33.7738, lng: -84.3986 },\n    { name: \"Klaus Advanced Computing Building\", lat: 33.7772, lng: -84.3956 },\n    { name: \"Tech Square\", lat: 33.7764, lng: -84.3889 },\n    { name: \"Campus Recreation Center (CRC)\", lat: 33.7758, lng: -84.4025 },\n    { name: \"Price Gilbert Library\", lat: 33.7746, lng: -84.3967 },\n    { name: \"Bobby Dodd Stadium\", lat: 33.7722, lng: -84.3922 },\n    { name: \"Midtown MARTA Station\", lat: 33.7812, lng: -84.3867 },\n    { name: \"College of Computing\", lat: 33.7778, lng: -84.3975 },\n    { name: \"Clough Undergraduate Learning Commons\", lat: 33.7751, lng: -84.3963 },\n    { name: \"Kendeda Building\", lat: 33.7773, lng: -84.4005 },\n    { name: \"Van Leer Building\", lat: 33.7758, lng: -84.3968 },\n    { name: \"Howey Physics Building\", lat: 33.7775, lng: -84.3990 },\n    { name: \"Molecular Science Building\", lat: 33.7783, lng: -84.3994 },\n    { name: \"Instructional Center\", lat: 33.7754, lng: -84.3982 },\n    { name: \"Skiles Classroom Building\", lat: 33.7741, lng: -84.3955 },\n    { name: \"Weber Space Science Building\", lat: 33.7725, lng: -84.3951 },\n    { name: \"Ferst Center for the Arts\", lat: 33.7732, lng: -84.3977 },\n    { name: \"North Avenue Apartments\", lat: 33.7780, lng: -84.4035 },\n    { name: \"East Campus Apartments\", lat: 33.7705, lng: -84.3880 },\n    { name: \"Georgia Tech Hotel\", lat: 33.7763, lng: -84.3878 },\n    { name: \"GTRI Research Building\", lat: 33.7820, lng: -84.3870 },\n    { name: \"Techwood Drive Apartments\", lat: 33.7695, lng: -84.3850 },\n    { name: \"Curran Parking Deck\", lat: 33.7795, lng: -84.4010 },\n    { name: \"Fifth Street Bridge\", lat: 33.7775, lng: -84.3910 },\n    { name: \"Manufacture Building\", lat: 33.7765, lng: -84.4015 },\n  ];\n\n  // Custom marker icons (same as before)\n  const startIcon = L.icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  });\n\n  const endIcon = L.icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  });\n\n  const transferIcon = L.icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-orange.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n    iconSize: [25, 41],\n    iconAnchor: [12, 41],\n    popupAnchor: [1, -34],\n    shadowSize: [41, 41]\n  });\n\n  const stopIcon = L.icon({\n    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',\n    iconSize: [20, 33],\n    iconAnchor: [10, 33],\n    popupAnchor: [1, -28],\n    shadowSize: [33, 33]\n  });\n\n  useEffect(() => {\n    loadMockData();\n  }, []);\n\n  useEffect(() => {\n    if (mapRef.current && !mapInstanceRef.current && stops.length > 0) {\n      initMap();\n    }\n  }, [stops]);\n\n  useEffect(() => {\n    if (result && mapInstanceRef.current) {\n      updateMap();\n    }\n  }, [result]);\n\n  const loadMockData = () => {\n    setLoading(true);\n    setRoutes(mockRoutes);\n\n    const allStops: Stop[] = [];\n    const stopIds = new Set<string>();\n\n    mockRoutes.forEach(route => {\n      route.stops.forEach(stop => {\n        if (!stopIds.has(stop.id)) {\n          stopIds.add(stop.id);\n          allStops.push(stop);\n        }\n      });\n    });\n\n    setStops(allStops);\n    setLoading(false);\n  };\n\n  const initMap = () => {\n    if (!mapRef.current || mapInstanceRef.current) return;\n\n    const map = L.map(mapRef.current).setView(GT_CENTER, 15);\n    \n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n    }).addTo(map);\n\n    mapInstanceRef.current = map;\n  };\n\n  const calculateDistance = (lat1: number, lon1: number, lat2: number, lon2: number): number => {\n    const toRadian = (angle: number) => (Math.PI / 180) * angle;\n    const R = 6371;\n    \n    const dLat = toRadian(lat2 - lat1);\n    const dLon = toRadian(lon2 - lon1);\n    \n    const a = \n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos(toRadian(lat1)) * Math.cos(toRadian(lat2)) *\n      Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    \n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    const distance = R * c;\n    \n    return distance;\n  };\n\n  const findNearestStop = (lat: number, lng: number): Stop => {\n    let nearestStop = stops[0];\n    let minDistance = calculateDistance(lat, lng, stops[0].latitude, stops[0].longitude);\n\n    stops.forEach(stop => {\n      const distance = calculateDistance(lat, lng, stop.latitude, stop.longitude);\n      if (distance < minDistance) {\n        minDistance = distance;\n        nearestStop = stop;\n      }\n    });\n\n    return nearestStop;\n  };\n\n  const handleFromLocationSelect = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    const locationName = e.target.value;\n    setFromLocation(locationName);\n    \n    const location = popularLocations.find(loc => loc.name === locationName);\n    if (location) {\n      setFromCoords({ lat: location.lat, lng: location.lng });\n    }\n  };\n\n  const handleToLocationSelect = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    const locationName = e.target.value;\n    setToLocation(locationName);\n    \n    const location = popularLocations.find(loc => loc.name === locationName);\n    if (location) {\n      setToCoords({ lat: location.lat, lng: location.lng });\n    }\n  };\n\n  const clearMarkers = () => {\n    if (!mapInstanceRef.current) return;\n\n    if (markersRef.current && markersRef.current.length > 0) {\n      markersRef.current.forEach(marker => {\n        if (marker && mapInstanceRef.current) {\n          mapInstanceRef.current.removeLayer(marker);\n        }\n      });\n    }\n    markersRef.current = [];\n    \n    if (routeLineRef.current && routeLineRef.current.length > 0) {\n      routeLineRef.current.forEach(line => {\n        if (line && mapInstanceRef.current) {\n          mapInstanceRef.current.removeLayer(line);\n        }\n      });\n    }\n    routeLineRef.current = [];\n  };\n\n  const updateMap = () => {\n    if (!result || !mapInstanceRef.current) return;\n\n    clearMarkers();\n\n    const allCoordinates: [number, number][] = [];\n    const colors = ['#3B82F6', '#10B981', '#8B5CF6', '#F59E0B', '#EC4899'];\n\n    if (fromCoords) {\n      allCoordinates.push([fromCoords.lat, fromCoords.lng]);\n      const marker = L.marker([fromCoords.lat, fromCoords.lng], { icon: startIcon })\n        .bindPopup(`<strong>üèÅ YOUR LOCATION</strong><br>${fromLocation}<br>Walk to ${result.startStop.name}`)\n        .addTo(mapInstanceRef.current);\n      markersRef.current.push(marker);\n\n      const walkLine = L.polyline([\n        [fromCoords.lat, fromCoords.lng],\n        [result.startStop.latitude, result.startStop.longitude]\n      ], {\n        color: '#6B7280',\n        weight: 3,\n        opacity: 0.6,\n        dashArray: '5, 10'\n      }).addTo(mapInstanceRef.current);\n      routeLineRef.current.push(walkLine);\n    }\n\n    result.segments.forEach((segment, index) => {\n      const coordinates: [number, number][] = segment.stops.map(s => [s.latitude, s.longitude]);\n      allCoordinates.push(...coordinates);\n\n      const line = L.polyline(coordinates, {\n        color: colors[index % colors.length],\n        weight: 4,\n        opacity: 0.7\n      }).addTo(mapInstanceRef.current!);\n      routeLineRef.current.push(line);\n\n      segment.stops.forEach((stop, stopIndex) => {\n        let icon = stopIcon;\n        let popupText = `<strong>${stop.name}</strong>`;\n\n        if (stopIndex === 0 && index > 0) {\n          icon = transferIcon;\n          popupText = `<strong>üîÑ TRANSFER ${index}</strong><br>${stop.name}<br>Switch to ${segment.route.name}`;\n        } else if (stopIndex === segment.stops.length - 1 && index < result.segments.length - 1) {\n          icon = transferIcon;\n          popupText = `<strong>üîÑ TRANSFER ${index + 1}</strong><br>${stop.name}<br>Switch to ${result.segments[index + 1].route.name}`;\n        }\n\n        const marker = L.marker([stop.latitude, stop.longitude], { icon })\n          .bindPopup(popupText)\n          .addTo(mapInstanceRef.current!);\n        markersRef.current.push(marker);\n      });\n    });\n\n    if (toCoords) {\n      allCoordinates.push([toCoords.lat, toCoords.lng]);\n      const marker = L.marker([toCoords.lat, toCoords.lng], { icon: endIcon })\n        .bindPopup(`<strong>üéØ DESTINATION</strong><br>${toLocation}<br>Walk from ${result.endStop.name}`)\n        .addTo(mapInstanceRef.current);\n      markersRef.current.push(marker);\n\n      const walkLine = L.polyline([\n        [result.endStop.latitude, result.endStop.longitude],\n        [toCoords.lat, toCoords.lng]\n      ], {\n        color: '#6B7280',\n        weight: 3,\n        opacity: 0.6,\n        dashArray: '5, 10'\n      }).addTo(mapInstanceRef.current);\n      routeLineRef.current.push(walkLine);\n    }\n\n    if (allCoordinates.length > 0) {\n      const bounds = L.latLngBounds(allCoordinates);\n      mapInstanceRef.current.fitBounds(bounds, { padding: [50, 50] });\n    }\n  };\n\n  const findOptimalRoute = () => {\n    if (!fromCoords || !toCoords) {\n      setError(\"Please select both starting location and destination.\");\n      return;\n    }\n\n    if (fromLocation === toLocation) {\n      setError(\"Starting location and destination cannot be the same.\");\n      return;\n    }\n\n    setSearching(true);\n    setError(\"\");\n    setResult(null);\n\n    setTimeout(() => {\n      try {\n        const startStop = findNearestStop(fromCoords.lat, fromCoords.lng);\n        const endStop = findNearestStop(toCoords.lat, toCoords.lng);\n\n        const walkDistStart = calculateDistance(fromCoords.lat, fromCoords.lng, startStop.latitude, startStop.longitude);\n        const walkDistEnd = calculateDistance(toCoords.lat, toCoords.lng, endStop.latitude, endStop.longitude);\n\n        console.log(`Nearest start stop: ${startStop.name} (${(walkDistStart * 1000).toFixed(0)}m away)`);\n        console.log(`Nearest end stop: ${endStop.name} (${(walkDistEnd * 1000).toFixed(0)}m away)`);\n\n        const result = findRouteWithBFS(startStop.id, endStop.id);\n        \n        if (result) {\n          setResult({\n            ...result,\n            startStop,\n            endStop,\n            walkingDistanceStart: walkDistStart,\n            walkingDistanceEnd: walkDistEnd\n          });\n        } else {\n          setError(\"No routes found between these locations. Try different locations.\");\n        }\n      } catch (err) {\n        setError(\"‚ö†Ô∏è Failed to find route. Please try again.\");\n        console.error(err);\n      } finally {\n        setSearching(false);\n      }\n    }, 500);\n  };\n\n  // Fixed BFS algorithm\n  const findRouteWithBFS = (startStopId: string, endStopId: string): Omit<RouteResult, 'startStop' | 'endStop' | 'walkingDistanceStart' | 'walkingDistanceEnd'> | null => {\n    console.log('=== Starting BFS from', startStopId, 'to', endStopId, '===');\n\n    if (startStopId === endStopId) {\n      console.log('Start and end are the same!');\n      return null;\n    }\n\n    interface PathNode {\n      stopId: string;\n      routeId: string;\n      segments: RouteSegment[];\n      visitedStops: Set<string>;\n    }\n\n    const queue: PathNode[] = [];\n    const visited = new Map<string, Set<string>>();\n\n    // Initialize: Find all routes that have the start stop\n    routes.forEach(route => {\n      const stopIdx = route.stops.findIndex(s => s.id === startStopId);\n      if (stopIdx !== -1) {\n        console.log(`Found start stop in route: ${route.name}`);\n        queue.push({\n          stopId: startStopId,\n          routeId: route.id,\n          segments: [],\n          visitedStops: new Set([startStopId])\n        });\n      }\n    });\n\n    console.log(`Starting with ${queue.length} routes`);\n\n    let iterations = 0;\n    const maxIterations = 1000;\n\n    while (queue.length > 0 && iterations < maxIterations) {\n      iterations++;\n      const current = queue.shift()!;\n\n      // Mark as visited\n      const key = `${current.stopId}-${current.routeId}`;\n      if (visited.has(current.stopId)) {\n        if (visited.get(current.stopId)!.has(current.routeId)) {\n          continue;\n        }\n        visited.get(current.stopId)!.add(current.routeId);\n      } else {\n        visited.set(current.stopId, new Set([current.routeId]));\n      }\n\n      const currentRoute = routes.find(r => r.id === current.routeId);\n      if (!currentRoute) continue;\n\n      const currentStopIdx = currentRoute.stops.findIndex(s => s.id === current.stopId);\n      if (currentStopIdx === -1) continue;\n\n      // Explore all stops forward on this route\n      for (let i = currentStopIdx + 1; i < currentRoute.stops.length; i++) {\n        const nextStop = currentRoute.stops[i];\n\n        // Found the destination!\n        if (nextStop.id === endStopId) {\n          const finalSegment: RouteSegment = {\n            route: currentRoute,\n            fromStop: currentRoute.stops[currentStopIdx],\n            toStop: nextStop,\n            stops: currentRoute.stops.slice(currentStopIdx, i + 1)\n          };\n\n          const allSegments = [...current.segments, finalSegment];\n          console.log(`‚úÖ Found route with ${allSegments.length} segments!`);\n\n          return {\n            segments: allSegments,\n            totalStops: allSegments.reduce((sum, seg) => sum + seg.stops.length, 0),\n            transfers: allSegments.length - 1\n          };\n        }\n\n        // Skip already visited stops\n        if (current.visitedStops.has(nextStop.id)) continue;\n\n        // Check for transfer opportunities at this stop\n        routes.forEach(transferRoute => {\n          if (transferRoute.id === currentRoute.id) return;\n\n          const transferStopIdx = transferRoute.stops.findIndex(\n            s => s.id === nextStop.id || s.name === nextStop.name\n          );\n\n          if (transferStopIdx !== -1) {\n            // Create segment to this transfer point\n            const segmentToTransfer: RouteSegment = {\n              route: currentRoute,\n              fromStop: currentRoute.stops[currentStopIdx],\n              toStop: nextStop,\n              stops: currentRoute.stops.slice(currentStopIdx, i + 1)\n            };\n\n            const newVisited = new Set(current.visitedStops);\n            newVisited.add(nextStop.id);\n\n            queue.push({\n              stopId: nextStop.id,\n              routeId: transferRoute.id,\n              segments: [...current.segments, segmentToTransfer],\n              visitedStops: newVisited\n            });\n          }\n        });\n      }\n    }\n\n    console.log(`‚ùå No route found after ${iterations} iterations`);\n    return null;\n  };\n\n  if (loading) {\n    return (\n      <div className={styles.center}>\n        <h2>üöå Loading GT Bus Data...</h2>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.container}>\n      <h1>üöå Plan Your GT Trip</h1>\n      <p>Enter your location and destination - we'll find the best route with unlimited transfers!</p>\n\n      <div className={styles.gridContainer}>\n        <div className={styles.formPanel}>\n          <h2>Plan Your Route</h2>\n\n          <div className={styles.form}>\n            <label>üèÅ Starting Location</label>\n            <select\n              value={fromLocation}\n              onChange={handleFromLocationSelect}\n              className={styles.select}\n            >\n              <option value=\"\">Select starting location</option>\n              {popularLocations.map((loc) => (\n                <option key={loc.name} value={loc.name}>\n                  {loc.name}\n                </option>\n              ))}\n            </select>\n\n            <label>üéØ Destination</label>\n            <select\n              value={toLocation}\n              onChange={handleToLocationSelect}\n              className={styles.select}\n            >\n              <option value=\"\">Select destination</option>\n              {popularLocations.map((loc) => (\n                <option key={loc.name} value={loc.name}>\n                  {loc.name}\n                </option>\n              ))}\n            </select>\n\n            <button onClick={findOptimalRoute} disabled={searching}>\n              {searching ? \"Finding Route...\" : \"Find Best Route\"}\n            </button>\n\n            {error && <p className={styles.error}>{error}</p>}\n          </div>\n\n          {result && (\n            <div className={styles.result}>\n              <h2>‚úÖ Route Found</h2>\n              <p className={styles.highlight}>\n                {result.transfers === 0 ? (\n                  <>üöå Direct route - No transfers needed!</>\n                ) : (\n                  <>üîÑ {result.transfers} transfer{result.transfers > 1 ? 's' : ''} required</>\n                )}\n              </p>\n              \n              <div className={styles.walking}>\n                <p>üö∂ Walk {(result.walkingDistanceStart * 1000).toFixed(0)}m to <strong>{result.startStop.name}</strong></p>\n              </div>\n\n              {result.segments.map((segment, index) => (\n                <div key={index} className={styles.segment}>\n                  <h3>\n                    {index === 0 ? 'üü¢' : 'üîÑ'} {segment.route.name}\n                  </h3>\n                  <p>Board at: <strong>{segment.fromStop.name}</strong></p>\n                  <p>Ride {segment.stops.length - 1} stop{segment.stops.length > 2 ? 's' : ''}</p>\n                  <p>Exit at: <strong>{segment.toStop.name}</strong></p>\n                  {index < result.segments.length - 1 && (\n                    <p className={styles.transfer}>\n                      ‚Üì Transfer to {result.segments[index + 1].route.name}\n                    </p>\n                  )}\n                </div>\n              ))}\n\n              <div className={styles.walking}>\n                <p>üö∂ Walk {(result.walkingDistanceEnd * 1000).toFixed(0)}m to destination</p>\n              </div>\n              \n              <p className={styles.stats}>\n                Total: {result.totalStops} bus stops + {((result.walkingDistanceStart + result.walkingDistanceEnd) * 1000).toFixed(0)}m walking\n              </p>\n            </div>\n          )}\n        </div>\n\n        <div className={styles.mapPanel}>\n          <div ref={mapRef} className={styles.map}></div>\n        </div>\n      </div>\n\n      <Link to=\"/\" className={styles.linkButton}>\n        ‚Üê Return Home\n      </Link>\n    </div>\n  );\n};\n\nexport default PlanTripPage;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,IAAI,QAAQ,kBAAkB;AACvC,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAO,0BAA0B;AACjC,OAAOC,MAAM,MAAM,2BAA2B;AAG9C,SAASC,UAAU,QAAQ,8BAA8B;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAmB1D,MAAMC,YAAsB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnC,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGd,QAAQ,CAAU,EAAE,CAAC;EACjD,MAAM,CAACe,KAAK,EAAEC,QAAQ,CAAC,GAAGhB,QAAQ,CAAS,EAAE,CAAC;EAC9C,MAAM,CAACiB,YAAY,EAAEC,eAAe,CAAC,GAAGlB,QAAQ,CAAS,EAAE,CAAC;EAC5D,MAAM,CAACmB,UAAU,EAAEC,aAAa,CAAC,GAAGpB,QAAQ,CAAS,EAAE,CAAC;EACxD,MAAM,CAACqB,UAAU,EAAEC,aAAa,CAAC,GAAGtB,QAAQ,CAAoC,IAAI,CAAC;EACrF,MAAM,CAACuB,QAAQ,EAAEC,WAAW,CAAC,GAAGxB,QAAQ,CAAoC,IAAI,CAAC;EACjF,MAAM,CAACyB,OAAO,EAAEC,UAAU,CAAC,GAAG1B,QAAQ,CAAU,IAAI,CAAC;EACrD,MAAM,CAAC2B,SAAS,EAAEC,YAAY,CAAC,GAAG5B,QAAQ,CAAU,KAAK,CAAC;EAC1D,MAAM,CAAC6B,MAAM,EAAEC,SAAS,CAAC,GAAG9B,QAAQ,CAAqB,IAAI,CAAC;EAC9D,MAAM,CAAC+B,KAAK,EAAEC,QAAQ,CAAC,GAAGhC,QAAQ,CAAS,EAAE,CAAC;EAE9C,MAAMiC,MAAM,GAAG/B,MAAM,CAAiB,IAAI,CAAC;EAC3C,MAAMgC,cAAc,GAAGhC,MAAM,CAAe,IAAI,CAAC;EACjD,MAAMiC,UAAU,GAAGjC,MAAM,CAAa,EAAE,CAAC;EACzC,MAAMkC,YAAY,GAAGlC,MAAM,CAAe,EAAE,CAAC;EAE7C,MAAMmC,SAA2B,GAAG,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC;;EAEvD;EACA,MAAMC,gBAAgB,GAAG,CACvB;IAAEC,IAAI,EAAE,gBAAgB;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EACvD;IAAEF,IAAI,EAAE,mCAAmC;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EAC1E;IAAEF,IAAI,EAAE,aAAa;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EACpD;IAAEF,IAAI,EAAE,gCAAgC;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EACvE;IAAEF,IAAI,EAAE,uBAAuB;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EAC9D;IAAEF,IAAI,EAAE,oBAAoB;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EAC3D;IAAEF,IAAI,EAAE,uBAAuB;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EAC9D;IAAEF,IAAI,EAAE,sBAAsB;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EAC7D;IAAEF,IAAI,EAAE,uCAAuC;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EAC9E;IAAEF,IAAI,EAAE,kBAAkB;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EACzD;IAAEF,IAAI,EAAE,mBAAmB;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EAC1D;IAAEF,IAAI,EAAE,wBAAwB;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EAC/D;IAAEF,IAAI,EAAE,4BAA4B;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EACnE;IAAEF,IAAI,EAAE,sBAAsB;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EAC7D;IAAEF,IAAI,EAAE,2BAA2B;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EAClE;IAAEF,IAAI,EAAE,8BAA8B;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EACrE;IAAEF,IAAI,EAAE,2BAA2B;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EAClE;IAAEF,IAAI,EAAE,yBAAyB;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EAChE;IAAEF,IAAI,EAAE,wBAAwB;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EAC/D;IAAEF,IAAI,EAAE,oBAAoB;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EAC3D;IAAEF,IAAI,EAAE,wBAAwB;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EAC/D;IAAEF,IAAI,EAAE,2BAA2B;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EAClE;IAAEF,IAAI,EAAE,qBAAqB;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EAC5D;IAAEF,IAAI,EAAE,qBAAqB;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,EAC5D;IAAEF,IAAI,EAAE,sBAAsB;IAAEC,GAAG,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;EAAQ,CAAC,CAC9D;;EAED;EACA,MAAMC,SAAS,GAAGtC,CAAC,CAACuC,IAAI,CAAC;IACvBC,OAAO,EAAE,qGAAqG;IAC9GC,SAAS,EAAE,+EAA+E;IAC1FC,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;IAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;IACpBC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;IACrBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;EACrB,CAAC,CAAC;EAEF,MAAMC,OAAO,GAAG9C,CAAC,CAACuC,IAAI,CAAC;IACrBC,OAAO,EAAE,mGAAmG;IAC5GC,SAAS,EAAE,+EAA+E;IAC1FC,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;IAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;IACpBC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;IACrBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;EACrB,CAAC,CAAC;EAEF,MAAME,YAAY,GAAG/C,CAAC,CAACuC,IAAI,CAAC;IAC1BC,OAAO,EAAE,sGAAsG;IAC/GC,SAAS,EAAE,+EAA+E;IAC1FC,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;IAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;IACpBC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;IACrBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;EACrB,CAAC,CAAC;EAEF,MAAMG,QAAQ,GAAGhD,CAAC,CAACuC,IAAI,CAAC;IACtBC,OAAO,EAAE,oGAAoG;IAC7GC,SAAS,EAAE,+EAA+E;IAC1FC,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;IAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;IACpBC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;IACrBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;EACrB,CAAC,CAAC;EAEFhD,SAAS,CAAC,MAAM;IACdoD,YAAY,CAAC,CAAC;EAChB,CAAC,EAAE,EAAE,CAAC;EAENpD,SAAS,CAAC,MAAM;IACd,IAAIgC,MAAM,CAACqB,OAAO,IAAI,CAACpB,cAAc,CAACoB,OAAO,IAAIvC,KAAK,CAACwC,MAAM,GAAG,CAAC,EAAE;MACjEC,OAAO,CAAC,CAAC;IACX;EACF,CAAC,EAAE,CAACzC,KAAK,CAAC,CAAC;EAEXd,SAAS,CAAC,MAAM;IACd,IAAI4B,MAAM,IAAIK,cAAc,CAACoB,OAAO,EAAE;MACpCG,SAAS,CAAC,CAAC;IACb;EACF,CAAC,EAAE,CAAC5B,MAAM,CAAC,CAAC;EAEZ,MAAMwB,YAAY,GAAGA,CAAA,KAAM;IACzB3B,UAAU,CAAC,IAAI,CAAC;IAChBZ,SAAS,CAACR,UAAU,CAAC;IAErB,MAAMoD,QAAgB,GAAG,EAAE;IAC3B,MAAMC,OAAO,GAAG,IAAIC,GAAG,CAAS,CAAC;IAEjCtD,UAAU,CAACuD,OAAO,CAACC,KAAK,IAAI;MAC1BA,KAAK,CAAC/C,KAAK,CAAC8C,OAAO,CAACE,IAAI,IAAI;QAC1B,IAAI,CAACJ,OAAO,CAACK,GAAG,CAACD,IAAI,CAACE,EAAE,CAAC,EAAE;UACzBN,OAAO,CAACO,GAAG,CAACH,IAAI,CAACE,EAAE,CAAC;UACpBP,QAAQ,CAACS,IAAI,CAACJ,IAAI,CAAC;QACrB;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;IAEF/C,QAAQ,CAAC0C,QAAQ,CAAC;IAClBhC,UAAU,CAAC,KAAK,CAAC;EACnB,CAAC;EAED,MAAM8B,OAAO,GAAGA,CAAA,KAAM;IACpB,IAAI,CAACvB,MAAM,CAACqB,OAAO,IAAIpB,cAAc,CAACoB,OAAO,EAAE;IAE/C,MAAMc,GAAG,GAAGhE,CAAC,CAACgE,GAAG,CAACnC,MAAM,CAACqB,OAAO,CAAC,CAACe,OAAO,CAAChC,SAAS,EAAE,EAAE,CAAC;IAExDjC,CAAC,CAACkE,SAAS,CAAC,oDAAoD,EAAE;MAChEC,WAAW,EAAE;IACf,CAAC,CAAC,CAACC,KAAK,CAACJ,GAAG,CAAC;IAEblC,cAAc,CAACoB,OAAO,GAAGc,GAAG;EAC9B,CAAC;EAED,MAAMK,iBAAiB,GAAGA,CAACC,IAAY,EAAEC,IAAY,EAAEC,IAAY,EAAEC,IAAY,KAAa;IAC5F,MAAMC,QAAQ,GAAIC,KAAa,IAAMC,IAAI,CAACC,EAAE,GAAG,GAAG,GAAIF,KAAK;IAC3D,MAAMG,CAAC,GAAG,IAAI;IAEd,MAAMC,IAAI,GAAGL,QAAQ,CAACF,IAAI,GAAGF,IAAI,CAAC;IAClC,MAAMU,IAAI,GAAGN,QAAQ,CAACD,IAAI,GAAGF,IAAI,CAAC;IAElC,MAAMU,CAAC,GACLL,IAAI,CAACM,GAAG,CAACH,IAAI,GAAG,CAAC,CAAC,GAAGH,IAAI,CAACM,GAAG,CAACH,IAAI,GAAG,CAAC,CAAC,GACvCH,IAAI,CAACO,GAAG,CAACT,QAAQ,CAACJ,IAAI,CAAC,CAAC,GAAGM,IAAI,CAACO,GAAG,CAACT,QAAQ,CAACF,IAAI,CAAC,CAAC,GACnDI,IAAI,CAACM,GAAG,CAACF,IAAI,GAAG,CAAC,CAAC,GAAGJ,IAAI,CAACM,GAAG,CAACF,IAAI,GAAG,CAAC,CAAC;IAEzC,MAAMI,CAAC,GAAG,CAAC,GAAGR,IAAI,CAACS,KAAK,CAACT,IAAI,CAACU,IAAI,CAACL,CAAC,CAAC,EAAEL,IAAI,CAACU,IAAI,CAAC,CAAC,GAAGL,CAAC,CAAC,CAAC;IACxD,MAAMM,QAAQ,GAAGT,CAAC,GAAGM,CAAC;IAEtB,OAAOG,QAAQ;EACjB,CAAC;EAED,MAAMC,eAAe,GAAGA,CAACpD,GAAW,EAAEC,GAAW,KAAW;IAC1D,IAAIoD,WAAW,GAAG9E,KAAK,CAAC,CAAC,CAAC;IAC1B,IAAI+E,WAAW,GAAGrB,iBAAiB,CAACjC,GAAG,EAAEC,GAAG,EAAE1B,KAAK,CAAC,CAAC,CAAC,CAACgF,QAAQ,EAAEhF,KAAK,CAAC,CAAC,CAAC,CAACiF,SAAS,CAAC;IAEpFjF,KAAK,CAAC8C,OAAO,CAACE,IAAI,IAAI;MACpB,MAAM4B,QAAQ,GAAGlB,iBAAiB,CAACjC,GAAG,EAAEC,GAAG,EAAEsB,IAAI,CAACgC,QAAQ,EAAEhC,IAAI,CAACiC,SAAS,CAAC;MAC3E,IAAIL,QAAQ,GAAGG,WAAW,EAAE;QAC1BA,WAAW,GAAGH,QAAQ;QACtBE,WAAW,GAAG9B,IAAI;MACpB;IACF,CAAC,CAAC;IAEF,OAAO8B,WAAW;EACpB,CAAC;EAED,MAAMI,wBAAwB,GAAIC,CAAuC,IAAK;IAC5E,MAAMC,YAAY,GAAGD,CAAC,CAACE,MAAM,CAACC,KAAK;IACnCnF,eAAe,CAACiF,YAAY,CAAC;IAE7B,MAAMG,QAAQ,GAAGhE,gBAAgB,CAACiE,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACjE,IAAI,KAAK4D,YAAY,CAAC;IACxE,IAAIG,QAAQ,EAAE;MACZhF,aAAa,CAAC;QAAEkB,GAAG,EAAE8D,QAAQ,CAAC9D,GAAG;QAAEC,GAAG,EAAE6D,QAAQ,CAAC7D;MAAI,CAAC,CAAC;IACzD;EACF,CAAC;EAED,MAAMgE,sBAAsB,GAAIP,CAAuC,IAAK;IAC1E,MAAMC,YAAY,GAAGD,CAAC,CAACE,MAAM,CAACC,KAAK;IACnCjF,aAAa,CAAC+E,YAAY,CAAC;IAE3B,MAAMG,QAAQ,GAAGhE,gBAAgB,CAACiE,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACjE,IAAI,KAAK4D,YAAY,CAAC;IACxE,IAAIG,QAAQ,EAAE;MACZ9E,WAAW,CAAC;QAAEgB,GAAG,EAAE8D,QAAQ,CAAC9D,GAAG;QAAEC,GAAG,EAAE6D,QAAQ,CAAC7D;MAAI,CAAC,CAAC;IACvD;EACF,CAAC;EAED,MAAMiE,YAAY,GAAGA,CAAA,KAAM;IACzB,IAAI,CAACxE,cAAc,CAACoB,OAAO,EAAE;IAE7B,IAAInB,UAAU,CAACmB,OAAO,IAAInB,UAAU,CAACmB,OAAO,CAACC,MAAM,GAAG,CAAC,EAAE;MACvDpB,UAAU,CAACmB,OAAO,CAACO,OAAO,CAAC8C,MAAM,IAAI;QACnC,IAAIA,MAAM,IAAIzE,cAAc,CAACoB,OAAO,EAAE;UACpCpB,cAAc,CAACoB,OAAO,CAACsD,WAAW,CAACD,MAAM,CAAC;QAC5C;MACF,CAAC,CAAC;IACJ;IACAxE,UAAU,CAACmB,OAAO,GAAG,EAAE;IAEvB,IAAIlB,YAAY,CAACkB,OAAO,IAAIlB,YAAY,CAACkB,OAAO,CAACC,MAAM,GAAG,CAAC,EAAE;MAC3DnB,YAAY,CAACkB,OAAO,CAACO,OAAO,CAACgD,IAAI,IAAI;QACnC,IAAIA,IAAI,IAAI3E,cAAc,CAACoB,OAAO,EAAE;UAClCpB,cAAc,CAACoB,OAAO,CAACsD,WAAW,CAACC,IAAI,CAAC;QAC1C;MACF,CAAC,CAAC;IACJ;IACAzE,YAAY,CAACkB,OAAO,GAAG,EAAE;EAC3B,CAAC;EAED,MAAMG,SAAS,GAAGA,CAAA,KAAM;IACtB,IAAI,CAAC5B,MAAM,IAAI,CAACK,cAAc,CAACoB,OAAO,EAAE;IAExCoD,YAAY,CAAC,CAAC;IAEd,MAAMI,cAAkC,GAAG,EAAE;IAC7C,MAAMC,MAAM,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;IAEtE,IAAI1F,UAAU,EAAE;MACdyF,cAAc,CAAC3C,IAAI,CAAC,CAAC9C,UAAU,CAACmB,GAAG,EAAEnB,UAAU,CAACoB,GAAG,CAAC,CAAC;MACrD,MAAMkE,MAAM,GAAGvG,CAAC,CAACuG,MAAM,CAAC,CAACtF,UAAU,CAACmB,GAAG,EAAEnB,UAAU,CAACoB,GAAG,CAAC,EAAE;QAAEE,IAAI,EAAED;MAAU,CAAC,CAAC,CAC3EsE,SAAS,CAAC,wCAAwC/F,YAAY,eAAeY,MAAM,CAACoF,SAAS,CAAC1E,IAAI,EAAE,CAAC,CACrGiC,KAAK,CAACtC,cAAc,CAACoB,OAAO,CAAC;MAChCnB,UAAU,CAACmB,OAAO,CAACa,IAAI,CAACwC,MAAM,CAAC;MAE/B,MAAMO,QAAQ,GAAG9G,CAAC,CAAC+G,QAAQ,CAAC,CAC1B,CAAC9F,UAAU,CAACmB,GAAG,EAAEnB,UAAU,CAACoB,GAAG,CAAC,EAChC,CAACZ,MAAM,CAACoF,SAAS,CAAClB,QAAQ,EAAElE,MAAM,CAACoF,SAAS,CAACjB,SAAS,CAAC,CACxD,EAAE;QACDoB,KAAK,EAAE,SAAS;QAChBC,MAAM,EAAE,CAAC;QACTC,OAAO,EAAE,GAAG;QACZC,SAAS,EAAE;MACb,CAAC,CAAC,CAAC/C,KAAK,CAACtC,cAAc,CAACoB,OAAO,CAAC;MAChClB,YAAY,CAACkB,OAAO,CAACa,IAAI,CAAC+C,QAAQ,CAAC;IACrC;IAEArF,MAAM,CAAC2F,QAAQ,CAAC3D,OAAO,CAAC,CAAC4D,OAAO,EAAEC,KAAK,KAAK;MAC1C,MAAMC,WAA+B,GAAGF,OAAO,CAAC1G,KAAK,CAACqD,GAAG,CAACwD,CAAC,IAAI,CAACA,CAAC,CAAC7B,QAAQ,EAAE6B,CAAC,CAAC5B,SAAS,CAAC,CAAC;MACzFc,cAAc,CAAC3C,IAAI,CAAC,GAAGwD,WAAW,CAAC;MAEnC,MAAMd,IAAI,GAAGzG,CAAC,CAAC+G,QAAQ,CAACQ,WAAW,EAAE;QACnCP,KAAK,EAAEL,MAAM,CAACW,KAAK,GAAGX,MAAM,CAACxD,MAAM,CAAC;QACpC8D,MAAM,EAAE,CAAC;QACTC,OAAO,EAAE;MACX,CAAC,CAAC,CAAC9C,KAAK,CAACtC,cAAc,CAACoB,OAAQ,CAAC;MACjClB,YAAY,CAACkB,OAAO,CAACa,IAAI,CAAC0C,IAAI,CAAC;MAE/BY,OAAO,CAAC1G,KAAK,CAAC8C,OAAO,CAAC,CAACE,IAAI,EAAE8D,SAAS,KAAK;QACzC,IAAIlF,IAAI,GAAGS,QAAQ;QACnB,IAAI0E,SAAS,GAAG,WAAW/D,IAAI,CAACxB,IAAI,WAAW;QAE/C,IAAIsF,SAAS,KAAK,CAAC,IAAIH,KAAK,GAAG,CAAC,EAAE;UAChC/E,IAAI,GAAGQ,YAAY;UACnB2E,SAAS,GAAG,uBAAuBJ,KAAK,gBAAgB3D,IAAI,CAACxB,IAAI,iBAAiBkF,OAAO,CAAC3D,KAAK,CAACvB,IAAI,EAAE;QACxG,CAAC,MAAM,IAAIsF,SAAS,KAAKJ,OAAO,CAAC1G,KAAK,CAACwC,MAAM,GAAG,CAAC,IAAImE,KAAK,GAAG7F,MAAM,CAAC2F,QAAQ,CAACjE,MAAM,GAAG,CAAC,EAAE;UACvFZ,IAAI,GAAGQ,YAAY;UACnB2E,SAAS,GAAG,uBAAuBJ,KAAK,GAAG,CAAC,gBAAgB3D,IAAI,CAACxB,IAAI,iBAAiBV,MAAM,CAAC2F,QAAQ,CAACE,KAAK,GAAG,CAAC,CAAC,CAAC5D,KAAK,CAACvB,IAAI,EAAE;QAC/H;QAEA,MAAMoE,MAAM,GAAGvG,CAAC,CAACuG,MAAM,CAAC,CAAC5C,IAAI,CAACgC,QAAQ,EAAEhC,IAAI,CAACiC,SAAS,CAAC,EAAE;UAAErD;QAAK,CAAC,CAAC,CAC/DqE,SAAS,CAACc,SAAS,CAAC,CACpBtD,KAAK,CAACtC,cAAc,CAACoB,OAAQ,CAAC;QACjCnB,UAAU,CAACmB,OAAO,CAACa,IAAI,CAACwC,MAAM,CAAC;MACjC,CAAC,CAAC;IACJ,CAAC,CAAC;IAEF,IAAIpF,QAAQ,EAAE;MACZuF,cAAc,CAAC3C,IAAI,CAAC,CAAC5C,QAAQ,CAACiB,GAAG,EAAEjB,QAAQ,CAACkB,GAAG,CAAC,CAAC;MACjD,MAAMkE,MAAM,GAAGvG,CAAC,CAACuG,MAAM,CAAC,CAACpF,QAAQ,CAACiB,GAAG,EAAEjB,QAAQ,CAACkB,GAAG,CAAC,EAAE;QAAEE,IAAI,EAAEO;MAAQ,CAAC,CAAC,CACrE8D,SAAS,CAAC,sCAAsC7F,UAAU,iBAAiBU,MAAM,CAACkG,OAAO,CAACxF,IAAI,EAAE,CAAC,CACjGiC,KAAK,CAACtC,cAAc,CAACoB,OAAO,CAAC;MAChCnB,UAAU,CAACmB,OAAO,CAACa,IAAI,CAACwC,MAAM,CAAC;MAE/B,MAAMO,QAAQ,GAAG9G,CAAC,CAAC+G,QAAQ,CAAC,CAC1B,CAACtF,MAAM,CAACkG,OAAO,CAAChC,QAAQ,EAAElE,MAAM,CAACkG,OAAO,CAAC/B,SAAS,CAAC,EACnD,CAACzE,QAAQ,CAACiB,GAAG,EAAEjB,QAAQ,CAACkB,GAAG,CAAC,CAC7B,EAAE;QACD2E,KAAK,EAAE,SAAS;QAChBC,MAAM,EAAE,CAAC;QACTC,OAAO,EAAE,GAAG;QACZC,SAAS,EAAE;MACb,CAAC,CAAC,CAAC/C,KAAK,CAACtC,cAAc,CAACoB,OAAO,CAAC;MAChClB,YAAY,CAACkB,OAAO,CAACa,IAAI,CAAC+C,QAAQ,CAAC;IACrC;IAEA,IAAIJ,cAAc,CAACvD,MAAM,GAAG,CAAC,EAAE;MAC7B,MAAMyE,MAAM,GAAG5H,CAAC,CAAC6H,YAAY,CAACnB,cAAc,CAAC;MAC7C5E,cAAc,CAACoB,OAAO,CAAC4E,SAAS,CAACF,MAAM,EAAE;QAAEG,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE;MAAE,CAAC,CAAC;IACjE;EACF,CAAC;EAED,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;IAC7B,IAAI,CAAC/G,UAAU,IAAI,CAACE,QAAQ,EAAE;MAC5BS,QAAQ,CAAC,uDAAuD,CAAC;MACjE;IACF;IAEA,IAAIf,YAAY,KAAKE,UAAU,EAAE;MAC/Ba,QAAQ,CAAC,uDAAuD,CAAC;MACjE;IACF;IAEAJ,YAAY,CAAC,IAAI,CAAC;IAClBI,QAAQ,CAAC,EAAE,CAAC;IACZF,SAAS,CAAC,IAAI,CAAC;IAEfuG,UAAU,CAAC,MAAM;MACf,IAAI;QACF,MAAMpB,SAAS,GAAGrB,eAAe,CAACvE,UAAU,CAACmB,GAAG,EAAEnB,UAAU,CAACoB,GAAG,CAAC;QACjE,MAAMsF,OAAO,GAAGnC,eAAe,CAACrE,QAAQ,CAACiB,GAAG,EAAEjB,QAAQ,CAACkB,GAAG,CAAC;QAE3D,MAAM6F,aAAa,GAAG7D,iBAAiB,CAACpD,UAAU,CAACmB,GAAG,EAAEnB,UAAU,CAACoB,GAAG,EAAEwE,SAAS,CAAClB,QAAQ,EAAEkB,SAAS,CAACjB,SAAS,CAAC;QAChH,MAAMuC,WAAW,GAAG9D,iBAAiB,CAAClD,QAAQ,CAACiB,GAAG,EAAEjB,QAAQ,CAACkB,GAAG,EAAEsF,OAAO,CAAChC,QAAQ,EAAEgC,OAAO,CAAC/B,SAAS,CAAC;QAEtGwC,OAAO,CAACC,GAAG,CAAC,uBAAuBxB,SAAS,CAAC1E,IAAI,KAAK,CAAC+F,aAAa,GAAG,IAAI,EAAEI,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC;QACjGF,OAAO,CAACC,GAAG,CAAC,qBAAqBV,OAAO,CAACxF,IAAI,KAAK,CAACgG,WAAW,GAAG,IAAI,EAAEG,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC;QAE3F,MAAM7G,MAAM,GAAG8G,gBAAgB,CAAC1B,SAAS,CAAChD,EAAE,EAAE8D,OAAO,CAAC9D,EAAE,CAAC;QAEzD,IAAIpC,MAAM,EAAE;UACVC,SAAS,CAAC;YACR,GAAGD,MAAM;YACToF,SAAS;YACTc,OAAO;YACPa,oBAAoB,EAAEN,aAAa;YACnCO,kBAAkB,EAAEN;UACtB,CAAC,CAAC;QACJ,CAAC,MAAM;UACLvG,QAAQ,CAAC,mEAAmE,CAAC;QAC/E;MACF,CAAC,CAAC,OAAO8G,GAAG,EAAE;QACZ9G,QAAQ,CAAC,4CAA4C,CAAC;QACtDwG,OAAO,CAACzG,KAAK,CAAC+G,GAAG,CAAC;MACpB,CAAC,SAAS;QACRlH,YAAY,CAAC,KAAK,CAAC;MACrB;IACF,CAAC,EAAE,GAAG,CAAC;EACT,CAAC;;EAED;EACA,MAAM+G,gBAAgB,GAAGA,CAACI,WAAmB,EAAEC,SAAiB,KAAwG;IACtKR,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEM,WAAW,EAAE,IAAI,EAAEC,SAAS,EAAE,KAAK,CAAC;IAEzE,IAAID,WAAW,KAAKC,SAAS,EAAE;MAC7BR,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;MAC1C,OAAO,IAAI;IACb;IASA,MAAMQ,KAAiB,GAAG,EAAE;IAC5B,MAAMC,OAAO,GAAG,IAAIC,GAAG,CAAsB,CAAC;;IAE9C;IACAtI,MAAM,CAACgD,OAAO,CAACC,KAAK,IAAI;MACtB,MAAMsF,OAAO,GAAGtF,KAAK,CAAC/C,KAAK,CAACsI,SAAS,CAACzB,CAAC,IAAIA,CAAC,CAAC3D,EAAE,KAAK8E,WAAW,CAAC;MAChE,IAAIK,OAAO,KAAK,CAAC,CAAC,EAAE;QAClBZ,OAAO,CAACC,GAAG,CAAC,8BAA8B3E,KAAK,CAACvB,IAAI,EAAE,CAAC;QACvD0G,KAAK,CAAC9E,IAAI,CAAC;UACTmF,MAAM,EAAEP,WAAW;UACnBQ,OAAO,EAAEzF,KAAK,CAACG,EAAE;UACjBuD,QAAQ,EAAE,EAAE;UACZgC,YAAY,EAAE,IAAI5F,GAAG,CAAC,CAACmF,WAAW,CAAC;QACrC,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;IAEFP,OAAO,CAACC,GAAG,CAAC,iBAAiBQ,KAAK,CAAC1F,MAAM,SAAS,CAAC;IAEnD,IAAIkG,UAAU,GAAG,CAAC;IAClB,MAAMC,aAAa,GAAG,IAAI;IAE1B,OAAOT,KAAK,CAAC1F,MAAM,GAAG,CAAC,IAAIkG,UAAU,GAAGC,aAAa,EAAE;MACrDD,UAAU,EAAE;MACZ,MAAMnG,OAAO,GAAG2F,KAAK,CAACU,KAAK,CAAC,CAAE;;MAE9B;MACA,MAAMC,GAAG,GAAG,GAAGtG,OAAO,CAACgG,MAAM,IAAIhG,OAAO,CAACiG,OAAO,EAAE;MAClD,IAAIL,OAAO,CAAClF,GAAG,CAACV,OAAO,CAACgG,MAAM,CAAC,EAAE;QAC/B,IAAIJ,OAAO,CAACW,GAAG,CAACvG,OAAO,CAACgG,MAAM,CAAC,CAAEtF,GAAG,CAACV,OAAO,CAACiG,OAAO,CAAC,EAAE;UACrD;QACF;QACAL,OAAO,CAACW,GAAG,CAACvG,OAAO,CAACgG,MAAM,CAAC,CAAEpF,GAAG,CAACZ,OAAO,CAACiG,OAAO,CAAC;MACnD,CAAC,MAAM;QACLL,OAAO,CAACY,GAAG,CAACxG,OAAO,CAACgG,MAAM,EAAE,IAAI1F,GAAG,CAAC,CAACN,OAAO,CAACiG,OAAO,CAAC,CAAC,CAAC;MACzD;MAEA,MAAMQ,YAAY,GAAGlJ,MAAM,CAAC0F,IAAI,CAACyD,CAAC,IAAIA,CAAC,CAAC/F,EAAE,KAAKX,OAAO,CAACiG,OAAO,CAAC;MAC/D,IAAI,CAACQ,YAAY,EAAE;MAEnB,MAAME,cAAc,GAAGF,YAAY,CAAChJ,KAAK,CAACsI,SAAS,CAACzB,CAAC,IAAIA,CAAC,CAAC3D,EAAE,KAAKX,OAAO,CAACgG,MAAM,CAAC;MACjF,IAAIW,cAAc,KAAK,CAAC,CAAC,EAAE;;MAE3B;MACA,KAAK,IAAIC,CAAC,GAAGD,cAAc,GAAG,CAAC,EAAEC,CAAC,GAAGH,YAAY,CAAChJ,KAAK,CAACwC,MAAM,EAAE2G,CAAC,EAAE,EAAE;QACnE,MAAMC,QAAQ,GAAGJ,YAAY,CAAChJ,KAAK,CAACmJ,CAAC,CAAC;;QAEtC;QACA,IAAIC,QAAQ,CAAClG,EAAE,KAAK+E,SAAS,EAAE;UAC7B,MAAMoB,YAA0B,GAAG;YACjCtG,KAAK,EAAEiG,YAAY;YACnBM,QAAQ,EAAEN,YAAY,CAAChJ,KAAK,CAACkJ,cAAc,CAAC;YAC5CK,MAAM,EAAEH,QAAQ;YAChBpJ,KAAK,EAAEgJ,YAAY,CAAChJ,KAAK,CAACwJ,KAAK,CAACN,cAAc,EAAEC,CAAC,GAAG,CAAC;UACvD,CAAC;UAED,MAAMM,WAAW,GAAG,CAAC,GAAGlH,OAAO,CAACkE,QAAQ,EAAE4C,YAAY,CAAC;UACvD5B,OAAO,CAACC,GAAG,CAAC,sBAAsB+B,WAAW,CAACjH,MAAM,YAAY,CAAC;UAEjE,OAAO;YACLiE,QAAQ,EAAEgD,WAAW;YACrBC,UAAU,EAAED,WAAW,CAACE,MAAM,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAKD,GAAG,GAAGC,GAAG,CAAC7J,KAAK,CAACwC,MAAM,EAAE,CAAC,CAAC;YACvEsH,SAAS,EAAEL,WAAW,CAACjH,MAAM,GAAG;UAClC,CAAC;QACH;;QAEA;QACA,IAAID,OAAO,CAACkG,YAAY,CAACxF,GAAG,CAACmG,QAAQ,CAAClG,EAAE,CAAC,EAAE;;QAE3C;QACApD,MAAM,CAACgD,OAAO,CAACiH,aAAa,IAAI;UAC9B,IAAIA,aAAa,CAAC7G,EAAE,KAAK8F,YAAY,CAAC9F,EAAE,EAAE;UAE1C,MAAM8G,eAAe,GAAGD,aAAa,CAAC/J,KAAK,CAACsI,SAAS,CACnDzB,CAAC,IAAIA,CAAC,CAAC3D,EAAE,KAAKkG,QAAQ,CAAClG,EAAE,IAAI2D,CAAC,CAACrF,IAAI,KAAK4H,QAAQ,CAAC5H,IACnD,CAAC;UAED,IAAIwI,eAAe,KAAK,CAAC,CAAC,EAAE;YAC1B;YACA,MAAMC,iBAA+B,GAAG;cACtClH,KAAK,EAAEiG,YAAY;cACnBM,QAAQ,EAAEN,YAAY,CAAChJ,KAAK,CAACkJ,cAAc,CAAC;cAC5CK,MAAM,EAAEH,QAAQ;cAChBpJ,KAAK,EAAEgJ,YAAY,CAAChJ,KAAK,CAACwJ,KAAK,CAACN,cAAc,EAAEC,CAAC,GAAG,CAAC;YACvD,CAAC;YAED,MAAMe,UAAU,GAAG,IAAIrH,GAAG,CAACN,OAAO,CAACkG,YAAY,CAAC;YAChDyB,UAAU,CAAC/G,GAAG,CAACiG,QAAQ,CAAClG,EAAE,CAAC;YAE3BgF,KAAK,CAAC9E,IAAI,CAAC;cACTmF,MAAM,EAAEa,QAAQ,CAAClG,EAAE;cACnBsF,OAAO,EAAEuB,aAAa,CAAC7G,EAAE;cACzBuD,QAAQ,EAAE,CAAC,GAAGlE,OAAO,CAACkE,QAAQ,EAAEwD,iBAAiB,CAAC;cAClDxB,YAAY,EAAEyB;YAChB,CAAC,CAAC;UACJ;QACF,CAAC,CAAC;MACJ;IACF;IAEAzC,OAAO,CAACC,GAAG,CAAC,0BAA0BgB,UAAU,aAAa,CAAC;IAC9D,OAAO,IAAI;EACb,CAAC;EAED,IAAIhI,OAAO,EAAE;IACX,oBACEjB,OAAA;MAAK0K,SAAS,EAAE7K,MAAM,CAAC8K,MAAO;MAAAC,QAAA,eAC5B5K,OAAA;QAAA4K,QAAA,EAAI;MAAyB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC/B,CAAC;EAEV;EAEA,oBACEhL,OAAA;IAAK0K,SAAS,EAAE7K,MAAM,CAACoL,SAAU;IAAAL,QAAA,gBAC/B5K,OAAA;MAAA4K,QAAA,EAAI;IAAoB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC7BhL,OAAA;MAAA4K,QAAA,EAAG;IAAyF;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,eAEhGhL,OAAA;MAAK0K,SAAS,EAAE7K,MAAM,CAACqL,aAAc;MAAAN,QAAA,gBACnC5K,OAAA;QAAK0K,SAAS,EAAE7K,MAAM,CAACsL,SAAU;QAAAP,QAAA,gBAC/B5K,OAAA;UAAA4K,QAAA,EAAI;QAAe;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAExBhL,OAAA;UAAK0K,SAAS,EAAE7K,MAAM,CAACuL,IAAK;UAAAR,QAAA,gBAC1B5K,OAAA;YAAA4K,QAAA,EAAO;UAAoB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACnChL,OAAA;YACE6F,KAAK,EAAEpF,YAAa;YACpB4K,QAAQ,EAAE5F,wBAAyB;YACnCiF,SAAS,EAAE7K,MAAM,CAACyL,MAAO;YAAAV,QAAA,gBAEzB5K,OAAA;cAAQ6F,KAAK,EAAC,EAAE;cAAA+E,QAAA,EAAC;YAAwB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,EACjDlJ,gBAAgB,CAAC8B,GAAG,CAAEoC,GAAG,iBACxBhG,OAAA;cAAuB6F,KAAK,EAAEG,GAAG,CAACjE,IAAK;cAAA6I,QAAA,EACpC5E,GAAG,CAACjE;YAAI,GADEiE,GAAG,CAACjE,IAAI;cAAA8I,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAEb,CACT,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACI,CAAC,eAEThL,OAAA;YAAA4K,QAAA,EAAO;UAAc;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC7BhL,OAAA;YACE6F,KAAK,EAAElF,UAAW;YAClB0K,QAAQ,EAAEpF,sBAAuB;YACjCyE,SAAS,EAAE7K,MAAM,CAACyL,MAAO;YAAAV,QAAA,gBAEzB5K,OAAA;cAAQ6F,KAAK,EAAC,EAAE;cAAA+E,QAAA,EAAC;YAAkB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,EAC3ClJ,gBAAgB,CAAC8B,GAAG,CAAEoC,GAAG,iBACxBhG,OAAA;cAAuB6F,KAAK,EAAEG,GAAG,CAACjE,IAAK;cAAA6I,QAAA,EACpC5E,GAAG,CAACjE;YAAI,GADEiE,GAAG,CAACjE,IAAI;cAAA8I,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAEb,CACT,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACI,CAAC,eAEThL,OAAA;YAAQuL,OAAO,EAAE3D,gBAAiB;YAAC4D,QAAQ,EAAErK,SAAU;YAAAyJ,QAAA,EACpDzJ,SAAS,GAAG,kBAAkB,GAAG;UAAiB;YAAA0J,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7C,CAAC,EAERzJ,KAAK,iBAAIvB,OAAA;YAAG0K,SAAS,EAAE7K,MAAM,CAAC0B,KAAM;YAAAqJ,QAAA,EAAErJ;UAAK;YAAAsJ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9C,CAAC,EAEL3J,MAAM,iBACLrB,OAAA;UAAK0K,SAAS,EAAE7K,MAAM,CAACwB,MAAO;UAAAuJ,QAAA,gBAC5B5K,OAAA;YAAA4K,QAAA,EAAI;UAAa;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACtBhL,OAAA;YAAG0K,SAAS,EAAE7K,MAAM,CAAC4L,SAAU;YAAAb,QAAA,EAC5BvJ,MAAM,CAACgJ,SAAS,KAAK,CAAC,gBACrBrK,OAAA,CAAAE,SAAA;cAAA0K,QAAA,EAAE;YAAsC,gBAAE,CAAC,gBAE3C5K,OAAA,CAAAE,SAAA;cAAA0K,QAAA,GAAE,eAAG,EAACvJ,MAAM,CAACgJ,SAAS,EAAC,WAAS,EAAChJ,MAAM,CAACgJ,SAAS,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE,EAAC,WAAS;YAAA,eAAE;UAC7E;YAAAQ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CAAC,eAEJhL,OAAA;YAAK0K,SAAS,EAAE7K,MAAM,CAAC6L,OAAQ;YAAAd,QAAA,eAC7B5K,OAAA;cAAA4K,QAAA,GAAG,oBAAQ,EAAC,CAACvJ,MAAM,CAAC+G,oBAAoB,GAAG,IAAI,EAAEF,OAAO,CAAC,CAAC,CAAC,EAAC,OAAK,eAAAlI,OAAA;gBAAA4K,QAAA,EAASvJ,MAAM,CAACoF,SAAS,CAAC1E;cAAI;gBAAA8I,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAS,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1G,CAAC,EAEL3J,MAAM,CAAC2F,QAAQ,CAACpD,GAAG,CAAC,CAACqD,OAAO,EAAEC,KAAK,kBAClClH,OAAA;YAAiB0K,SAAS,EAAE7K,MAAM,CAACoH,OAAQ;YAAA2D,QAAA,gBACzC5K,OAAA;cAAA4K,QAAA,GACG1D,KAAK,KAAK,CAAC,GAAG,IAAI,GAAG,IAAI,EAAC,GAAC,EAACD,OAAO,CAAC3D,KAAK,CAACvB,IAAI;YAAA;cAAA8I,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC7C,CAAC,eACLhL,OAAA;cAAA4K,QAAA,GAAG,YAAU,eAAA5K,OAAA;gBAAA4K,QAAA,EAAS3D,OAAO,CAAC4C,QAAQ,CAAC9H;cAAI;gBAAA8I,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAS,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eACzDhL,OAAA;cAAA4K,QAAA,GAAG,OAAK,EAAC3D,OAAO,CAAC1G,KAAK,CAACwC,MAAM,GAAG,CAAC,EAAC,OAAK,EAACkE,OAAO,CAAC1G,KAAK,CAACwC,MAAM,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE;YAAA;cAAA8H,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAChFhL,OAAA;cAAA4K,QAAA,GAAG,WAAS,eAAA5K,OAAA;gBAAA4K,QAAA,EAAS3D,OAAO,CAAC6C,MAAM,CAAC/H;cAAI;gBAAA8I,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAS,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,EACrD9D,KAAK,GAAG7F,MAAM,CAAC2F,QAAQ,CAACjE,MAAM,GAAG,CAAC,iBACjC/C,OAAA;cAAG0K,SAAS,EAAE7K,MAAM,CAAC8L,QAAS;cAAAf,QAAA,GAAC,qBACf,EAACvJ,MAAM,CAAC2F,QAAQ,CAACE,KAAK,GAAG,CAAC,CAAC,CAAC5D,KAAK,CAACvB,IAAI;YAAA;cAAA8I,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnD,CACJ;UAAA,GAXO9D,KAAK;YAAA2D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAYV,CACN,CAAC,eAEFhL,OAAA;YAAK0K,SAAS,EAAE7K,MAAM,CAAC6L,OAAQ;YAAAd,QAAA,eAC7B5K,OAAA;cAAA4K,QAAA,GAAG,oBAAQ,EAAC,CAACvJ,MAAM,CAACgH,kBAAkB,GAAG,IAAI,EAAEH,OAAO,CAAC,CAAC,CAAC,EAAC,kBAAgB;YAAA;cAAA2C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3E,CAAC,eAENhL,OAAA;YAAG0K,SAAS,EAAE7K,MAAM,CAAC+L,KAAM;YAAAhB,QAAA,GAAC,SACnB,EAACvJ,MAAM,CAAC4I,UAAU,EAAC,eAAa,EAAC,CAAC,CAAC5I,MAAM,CAAC+G,oBAAoB,GAAG/G,MAAM,CAACgH,kBAAkB,IAAI,IAAI,EAAEH,OAAO,CAAC,CAAC,CAAC,EAAC,WACxH;UAAA;YAAA2C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eAENhL,OAAA;QAAK0K,SAAS,EAAE7K,MAAM,CAACgM,QAAS;QAAAjB,QAAA,eAC9B5K,OAAA;UAAK8L,GAAG,EAAErK,MAAO;UAACiJ,SAAS,EAAE7K,MAAM,CAAC+D;QAAI;UAAAiH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5C,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAENhL,OAAA,CAACL,IAAI;MAACoM,EAAE,EAAC,GAAG;MAACrB,SAAS,EAAE7K,MAAM,CAACmM,UAAW;MAAApB,QAAA,EAAC;IAE3C;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAEV,CAAC;AAAC5K,EAAA,CAnjBID,YAAsB;AAAA8L,EAAA,GAAtB9L,YAAsB;AAqjB5B,eAAeA,YAAY;AAAC,IAAA8L,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}